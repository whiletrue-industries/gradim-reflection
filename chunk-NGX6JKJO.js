import{Aa as v,Ba as C,Da as b,Ea as d,J as f,Ja as y,N as u,O as h,P as g,Ta as M,Ua as x,X as a,Xa as P,aa as w,ca as _,da as l,ia as U,pa as p,qa as m,xa as o,ya as s,za as c}from"./chunk-MEFDK25W.js";var E=["https://gradim-wall.netlify.app/FB_P_ITA_200021_5770_013","https://gradim-wall.netlify.app/FB_P_FRA_88009_0072_018","https://gradim-wall.netlify.app/FB_P_IND_84010_016_809","https://gradim-wall.netlify.app/FB_P_USA_82002_0211_036","https://gradim-wall.netlify.app/FB_P_SUN_89009_1275_031"];function S(){let t=Math.floor(Math.random()*E.length);return E[t]}function V(t,n){if(t&1&&c(0,"iframe",1),t&2){let e=d();C("src",e.safeContextUrl(),_)}}function k(t,n){if(t&1){let e=v();o(0,"button",6),b("click",function(){u(e);let r=d();return h(r.shareToCanvas())}),g(),o(1,"svg",7),c(2,"path",8),s()()}}function L(t,n){if(t&1){let e=v();o(0,"button",9),b("click",function(){u(e);let r=d();return h(r.closeCanvas())}),g(),o(1,"svg",7),c(2,"path",10),s()()}}function T(t,n){if(t&1&&(o(0,"div",11),c(1,"iframe",12),s()),t&2){let e=d();y("slide-in-left",!e.isClosing())("slide-out-left",e.isClosing()),l(),C("src",e.safeCanvasUrl(),_)}}var O=class t{sanitizer=f(P);platformId=f(w);currentUrl=a("");safeContextUrl=a(null);canvasVisible=a(!1);safeCanvasUrl=a(null);isClosing=a(!1);constructor(){let n=S();this.currentUrl.set(n),this.safeContextUrl.set(this.sanitizer.bypassSecurityTrustResourceUrl(n)),x(this.platformId)&&window.addEventListener("message",this.handleMessage)}ngOnDestroy(){x(this.platformId)&&window.removeEventListener("message",this.handleMessage)}handleMessage=n=>{n.data?.type==="closeCanvas"&&this.closeCanvas()};shareToCanvas(){this.isClosing.set(!1);let n=this.currentUrl();if(!n)return;let e=`pending-canvas-url-${crypto.randomUUID()}`;try{sessionStorage.setItem(e,n)}catch(D){console.error("Failed to store URL in sessionStorage:",D);return}let r=`${window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/")+1)}sample-reflect/?loadUrl=${e}`;this.safeCanvasUrl.set(this.sanitizer.bypassSecurityTrustResourceUrl(r)),this.canvasVisible.set(!0)}closeCanvas(){this.canvasVisible()&&(this.isClosing.set(!0),setTimeout(()=>{this.canvasVisible.set(!1),this.safeCanvasUrl.set(null),this.isClosing.set(!1)},240))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=U({type:t,selectors:[["app-url-wrapper"]],decls:6,vars:3,consts:[[1,"url-wrapper-container"],["title","Context View","sandbox","allow-scripts allow-same-origin allow-forms allow-popups",1,"wrapped-iframe",3,"src"],[1,"share-button-container"],["type","button","title","Share to canvas",1,"share-button"],["type","button","title","Close canvas",1,"share-button","close"],[1,"canvas-overlay",3,"slide-in-left","slide-out-left"],["type","button","title","Share to canvas",1,"share-button",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","currentColor"],["d","M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"],["type","button","title","Close canvas",1,"share-button","close",3,"click"],["d","M14.7 5.3a1 1 0 0 1 0 1.4L10.41 11H19a1 1 0 1 1 0 2h-8.59l4.29 4.3a1 1 0 0 1-1.42 1.4l-6-6a1 1 0 0 1 0-1.4l6-6a1 1 0 0 1 1.42 0Z"],[1,"canvas-overlay"],["title","Canvas View","sandbox","allow-scripts allow-same-origin allow-forms allow-popups",1,"canvas-iframe",3,"src"]],template:function(e,i){e&1&&(o(0,"div",0),p(1,V,1,1,"iframe",1),o(2,"div",2),p(3,k,3,0,"button",3)(4,L,3,0,"button",4),s(),p(5,T,2,5,"div",5),s()),e&2&&(l(),m(i.safeContextUrl()?1:-1),l(2),m(i.canvasVisible()?4:3),l(2),m(i.canvasVisible()&&i.safeCanvasUrl()?5:-1))},dependencies:[M],styles:[".url-wrapper-container[_ngcontent-%COMP%]{position:fixed;inset:0;width:100vw;height:100vh;overflow:hidden;background:#000}.wrapped-iframe[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;border:none;display:block;z-index:1}.share-button-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:20px;z-index:200;pointer-events:auto}.share-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:48px;height:48px;padding:0;background-color:#141414f2;color:#e6e6e6;border:1px solid rgba(255,255,255,.1);border-radius:8px;cursor:pointer;box-shadow:0 2px 12px #00000080;transition:all .2s ease}.share-button[_ngcontent-%COMP%]:hover{background-color:#1e1e1efa;border-color:#fff3;transform:translateY(-2px);box-shadow:0 4px 16px #0009}.share-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 8px #0006}.share-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.share-button.close[_ngcontent-%COMP%]{background-color:#1e1e1ef2}.canvas-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;width:100vw;height:100vh;z-index:10;background:#0000000d;overflow:hidden}.canvas-overlay.slide-in-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideFromLeft .36s ease-in-out}.canvas-overlay.slide-out-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideToLeft .36s ease-in-out}.canvas-iframe[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;border:none;display:block;box-shadow:0 0 30px #0000004d}@keyframes _ngcontent-%COMP%_slideFromLeft{0%{clip-path:inset(0 100% 0 0)}to{clip-path:inset(0 0 0 0)}}@keyframes _ngcontent-%COMP%_slideToLeft{0%{clip-path:inset(0 0 0 0)}to{clip-path:inset(0 100% 0 0)}}"],changeDetection:0})};export{O as UrlWrapper};
