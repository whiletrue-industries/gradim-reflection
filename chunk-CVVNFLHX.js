import{a as St}from"./chunk-5PKAR4MF.js";import{Aa as S,Ca as v,Ea as c,Fa as wt,Ga as xt,Ha as it,Ia as j,J as $,Ja as A,Ka as k,La as Z,M as Q,Ma as Mt,N as p,Na as Ot,O as u,P as I,Pa as V,Q as U,Qa as yt,R as vt,Ra as ot,Ua as rt,Va as at,Wa as O,X as x,Y as G,Za as Pt,a as P,aa as J,b as E,ba as ht,ca as bt,da as _,ea as Y,ia as R,oa as tt,pa as F,qa as D,ra as et,sa as nt,ta as C,ua as d,va as g,wa as M,xa as _t,ya as Ct}from"./chunk-NJ4HO3WV.js";var Et=["*"];var jt=(()=>{class h{platformId=$(J);fullScreen=ot(!1);isInIframe=x(!1);constructor(){O(this.platformId)&&(this.isInIframe.set(window!==window.parent),this.setupIframeCommunication())}setupIframeCommunication(){this.isInIframe()&&(window.addEventListener("message",e=>{this.handleParentMessage(e)}),this.postMessageToParent({type:"APP_READY",timestamp:Date.now()}))}handleParentMessage(e){let{type:n,data:i}=e.data;switch(n){case"REQUEST_DATA":this.handleDataRequest();break;case"CONFIG_UPDATE":this.handleConfigUpdate(i);break;default:console.warn("Unknown message type from parent:",n)}}handleDataRequest(){this.postMessageToParent({type:"DATA_RESPONSE",data:{title:"",description:"",link:"",imageUrl:"",imageBlob:null,metadata:{itemsUsed:[],tags:[],userId:"",username:"",email:""}}})}handleConfigUpdate(e){console.log("Config update received:",e)}postMessageToParent(e){this.isInIframe()&&O(this.platformId)&&window.parent.postMessage(e,"*")}sendDataToParent(e){this.postMessageToParent({type:"DATA_UPDATE",data:e})}static \u0275fac=function(n){return new(n||h)};static \u0275cmp=R({type:h,selectors:[["lib-layout"]],hostVars:4,hostBindings:function(n,i){n&2&&A("is-iframe",i.isInIframe())("full-screen",i.fullScreen())},inputs:{fullScreen:[1,"fullScreen"]},ngContentSelectors:Et,decls:3,vars:0,consts:[[1,"layout-container"],[1,"layout-content"]],template:function(n,i){n&1&&(wt(),_t(0,"div",0)(1,"div",1),xt(2),Ct()())},styles:["[_nghost-%COMP%]{display:block;width:100%;min-height:100vh}.layout-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;width:100%}.layout-content[_ngcontent-%COMP%]{flex:1;width:100%;max-width:1200px;margin:0 auto;padding:16px}@media(min-width:1024px){.layout-content[_ngcontent-%COMP%]{padding:24px}}.is-iframe[_nghost-%COMP%]   .layout-content[_ngcontent-%COMP%]{max-width:100%;padding:8px}.full-screen[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]{overflow:hidden}.full-screen[_nghost-%COMP%]   .layout-content[_ngcontent-%COMP%]{max-width:100%;padding:0;margin:0}"],changeDetection:0})}return h})();var st=[{id:"centered",label:"Center",render:h=>h},{id:"frame",label:"Frame",render:h=>h},{id:"app3",label:"App 3",render:h=>h}];var Dt=h=>({transform:h}),At=(h,t)=>t.id;function Lt(h,t){if(h&1){let e=S();d(0,"button",4),v("click",function(){let i=p(e).$index,o=c();return u(o.selectApp(i))}),d(1,"span",5),k(2),g()()}if(h&2){let e=t.$implicit,n=t.$index,i=c();A("active",i.selectedAppIndex()===n),tt("aria-label",e.label),_(2),Z(n+1)}}function Ut(h,t){if(h&1&&(d(0,"div",3),k(1),g()),h&2){let e=c();_(),Z(e.apps[e.selectedAppIndex()].label)}}var ct=class h{apps=st;selectedAppIndex=ot(0);appChanged=yt();touchStartX=0;touchCurrentX=0;carouselOffset=x(0);viewportWidth=0;computedOffset=V(()=>{let t=this.selectedAppIndex(),e=84,n=this.viewportWidth/2,i=t*e+e/2;return n-i});constructor(){typeof window<"u"&&(this.viewportWidth=window.innerWidth,window.addEventListener("resize",()=>{this.viewportWidth=window.innerWidth})),this.carouselOffset.set(this.computedOffset()),G(()=>{this.carouselOffset.set(this.computedOffset())})}onTouchStart(t){this.touchStartX=t.touches[0].clientX,this.touchCurrentX=this.touchStartX}onTouchMove(t){this.touchCurrentX=t.touches[0].clientX;let e=this.touchCurrentX-this.touchStartX;this.carouselOffset.set(this.computedOffset()+e)}onTouchEnd(t){let e=this.touchCurrentX-this.touchStartX,n=30,i=this.selectedAppIndex();e>n&&i>0?this.selectApp(i-1):e<-n&&i<this.apps.length-1?this.selectApp(i+1):this.carouselOffset.set(this.computedOffset())}selectApp(t){t>=0&&t<this.apps.length&&this.appChanged.emit(t)}static \u0275fac=function(e){return new(e||h)};static \u0275cmp=R({type:h,selectors:[["app-canvas-carousel"]],inputs:{selectedAppIndex:[1,"selectedAppIndex"]},outputs:{appChanged:"appChanged"},decls:5,vars:4,consts:[[1,"carousel-container",3,"touchstart","touchmove","touchend"],[1,"carousel-track",3,"ngStyle"],[1,"carousel-button",3,"active"],[1,"app-label"],[1,"carousel-button",3,"click"],[1,"circle"]],template:function(e,n){e&1&&(d(0,"div",0),v("touchstart",function(o){return n.onTouchStart(o)})("touchmove",function(o){return n.onTouchMove(o)})("touchend",function(o){return n.onTouchEnd(o)}),d(1,"div",1),et(2,Lt,3,4,"button",2,At),g(),F(4,Ut,2,1,"div",3),g()),e&2&&(_(),C("ngStyle",Ot(2,Dt,"translateX("+n.carouselOffset()+"px)")),_(),nt(n.apps),_(2),D(n.apps[n.selectedAppIndex()]?4:-1))},dependencies:[at,rt],styles:[".carousel-container[_ngcontent-%COMP%]{position:fixed;bottom:50px;left:0;right:0;padding:16px 0;z-index:100;touch-action:pan-x;display:flex;flex-direction:column;align-items:center;gap:8px;overflow:hidden}.carousel-track[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-start;width:100%;transition:transform .3s cubic-bezier(.25,.46,.45,.94)}.carousel-button[_ngcontent-%COMP%]{background:none;border:none;padding:0;cursor:pointer;width:72px;height:72px;display:flex;align-items:center;justify-content:center;transition:all .2s ease;flex-shrink:0}.circle[_ngcontent-%COMP%]{width:60px;height:60px;border:2px solid rgba(255,255,255,.4);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff9;font-weight:700;font-size:20px;transition:all .2s ease}.carousel-button.active[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{background:#ffffffe6;color:#000;border-color:#fff;box-shadow:0 0 12px #ffffff4d}.carousel-button[_ngcontent-%COMP%]:hover:not(.active)   .circle[_ngcontent-%COMP%]{border-color:#fff9;color:#fffc}.app-label[_ngcontent-%COMP%]{color:#fffc;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}@media(min-width:769px){.carousel-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:20px;background:#00000080;padding:12px 16px;border-radius:8px;width:auto;flex-direction:row;gap:12px}.carousel-track[_ngcontent-%COMP%]{gap:8px}.app-label[_ngcontent-%COMP%]{margin-left:8px}}"],changeDetection:0})};var Rt=(h,t)=>t.id;function Xt(h,t){if(h&1){let e=S();d(0,"div",48),v("click",function(i){return p(e),it(4).click(),u(i.stopPropagation())})("touchstart",function(i){return p(e),it(4).click(),u(i.stopPropagation())}),d(1,"div",49),k(2,"+"),g(),d(3,"input",50,0),v("change",function(i){p(e);let o=c().$implicit,r=c();return u(r.onEmptyFrameUpload(i,o.id))}),g()()}}function Yt(h,t){if(h&1){let e=S();d(0,"img",51),v("load",function(i){p(e);let o=c().$implicit,r=c();return u(r.onUserImageLoad(i,o.id))}),g()}if(h&2){let e=c().$implicit;C("src",e.content,ht)}}function $t(h,t){if(h&1){let e=S();d(0,"img",52),v("load",function(i){p(e);let o=c().$implicit,r=c();return u(r.onOgImageLoad(i,o.id))}),g()}if(h&2){let e=c().$implicit;C("src",e.ogImage,ht)}}function Nt(h,t){if(h&1){let e=S();d(0,"div",56),v("click",function(i){p(e);let o=c(2).$implicit,r=c();return u(r.onIframeOverlayClick(i,o.id))}),d(1,"div",57),k(2," Click to interact "),g()()}}function Wt(h,t){if(h&1){let e=S();d(0,"div",53),v("mouseenter",function(){p(e);let i=c().$implicit,o=c();return u(o.onIframeMouseEnter(i.id))})("mouseleave",function(){p(e);let i=c().$implicit,o=c();return u(o.onIframeMouseLeave(i.id))}),d(1,"iframe",54),v("load",function(i){p(e);let o=c().$implicit,r=c();return u(r.onIframeLoad(i,o.id))}),g(),F(2,Nt,3,0,"div",55),g()}if(h&2){let e=c().$implicit,n=c();_(),A("dimmed",n.hoveredIframeId()===e.id)("interactive",n.interactiveIframeId()===e.id),C("src",e.safeUrl||e.content,bt),tt("scrolling",n.interactiveIframeId()===e.id?"yes":"no"),_(),D(n.hoveredIframeId()===e.id&&n.interactiveIframeId()!==e.id?2:-1)}}function Bt(h,t){if(h&1){let e=S();d(0,"div",58)(1,"button",72),v("click",function(){p(e);let i=c(2).$implicit,o=c();return u(o.toggleDisplayMode(i.id))}),I(),d(2,"svg",15),M(3,"path",73)(4,"path",74),g()(),U(),d(5,"button",75),v("click",function(){p(e);let i=c(2).$implicit,o=c();return u(o.toggleDisplayMode(i.id))}),I(),d(6,"svg",15),M(7,"path",76),g()()()}if(h&2){let e=c(2).$implicit,n=c();C("ngStyle",n.getInverseScaleStyle(e)),_(),A("active",e.displayMode==="image"),_(4),A("active",e.displayMode==="iframe")}}function Gt(h,t){if(h&1){let e=S();F(0,Bt,8,5,"div",58),M(1,"div",59),d(2,"div",60),v("mousedown",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleMouseDown(i,o.id,"scale-nw"))})("touchstart",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleTouchStart(i,o.id,"scale-nw"))}),g(),d(3,"div",61),v("mousedown",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleMouseDown(i,o.id,"scale-ne"))})("touchstart",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleTouchStart(i,o.id,"scale-ne"))}),g(),d(4,"div",62),v("mousedown",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleMouseDown(i,o.id,"scale-sw"))})("touchstart",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleTouchStart(i,o.id,"scale-sw"))}),g(),d(5,"div",63),v("mousedown",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleMouseDown(i,o.id,"scale-se"))})("touchstart",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleTouchStart(i,o.id,"scale-se"))}),g(),d(6,"div",64),v("mousedown",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleMouseDown(i,o.id,"scale-w"))})("touchstart",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleTouchStart(i,o.id,"scale-w"))}),g(),d(7,"div",65),v("mousedown",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleMouseDown(i,o.id,"scale-e"))})("touchstart",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleTouchStart(i,o.id,"scale-e"))}),g(),d(8,"div",66),v("mousedown",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleMouseDown(i,o.id,"scale-n"))})("touchstart",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleTouchStart(i,o.id,"scale-n"))}),g(),d(9,"div",67),v("mousedown",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleMouseDown(i,o.id,"scale-s"))})("touchstart",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleTouchStart(i,o.id,"scale-s"))}),g(),d(10,"div",68),v("mousedown",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleMouseDown(i,o.id,"rotate-nw"))})("touchstart",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleTouchStart(i,o.id,"rotate-nw"))}),g(),d(11,"div",69),v("mousedown",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleMouseDown(i,o.id,"rotate-ne"))})("touchstart",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleTouchStart(i,o.id,"rotate-ne"))}),g(),d(12,"div",70),v("mousedown",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleMouseDown(i,o.id,"rotate-sw"))})("touchstart",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleTouchStart(i,o.id,"rotate-sw"))}),g(),d(13,"div",71),v("mousedown",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleMouseDown(i,o.id,"rotate-se"))})("touchstart",function(i){p(e);let o=c().$implicit,r=c();return u(r.onHandleTouchStart(i,o.id,"rotate-se"))}),g()}if(h&2){let e=c().$implicit,n=c();D(e.type==="iframe"&&e.ogImage?0:-1),_(),C("ngStyle",n.getSelectionBorderStyle()),_(),j("cursor",n.getCursorForHandle(e,"scale-nw")),C("ngStyle",n.getInverseScaleStyle(e)),_(),j("cursor",n.getCursorForHandle(e,"scale-ne")),C("ngStyle",n.getInverseScaleStyle(e)),_(),j("cursor",n.getCursorForHandle(e,"scale-sw")),C("ngStyle",n.getInverseScaleStyle(e)),_(),j("cursor",n.getCursorForHandle(e,"scale-se")),C("ngStyle",n.getInverseScaleStyle(e)),_(),j("cursor",n.getCursorForHandle(e,"scale-w")),C("ngStyle",n.getInverseScaleStyle(e)),_(),j("cursor",n.getCursorForHandle(e,"scale-e")),C("ngStyle",n.getInverseScaleStyle(e)),_(),j("cursor",n.getCursorForHandle(e,"scale-n")),C("ngStyle",n.getInverseScaleStyle(e)),_(),j("cursor",n.getCursorForHandle(e,"scale-s")),C("ngStyle",n.getInverseScaleStyle(e)),_(),j("cursor",n.getRotateCursor(e,"nw")),C("ngStyle",n.getInverseScaleStyle(e)),_(),j("cursor",n.getRotateCursor(e,"ne")),C("ngStyle",n.getInverseScaleStyle(e)),_(),j("cursor",n.getRotateCursor(e,"sw")),C("ngStyle",n.getInverseScaleStyle(e)),_(),j("cursor",n.getRotateCursor(e,"se")),C("ngStyle",n.getInverseScaleStyle(e))}}function Zt(h,t){if(h&1){let e=S();d(0,"div",42),v("click",function(i){let o=p(e).$implicit,r=c();return u(r.onObjectClick(i,o.id))})("mousedown",function(i){let o=p(e).$implicit,r=c();return u(r.onObjectMouseDown(i,o.id))})("touchstart",function(i){let o=p(e).$implicit,r=c();return u(r.onObjectTouchStart(i,o.id))}),M(1,"div",43),F(2,Xt,5,0,"div",44)(3,Yt,1,1,"img",45)(4,$t,1,1,"img",46)(5,Wt,3,7,"div",47),F(6,Gt,14,38),g()}if(h&2){let e=t.$implicit,n=c();A("selected",n.selectedObjectId()===e.id),C("ngStyle",n.getObjectStyle(e)),_(),C("ngStyle",n.getSelectionBorderStyle()),_(),D(e.isEmptyFrame?2:e.type==="image"?3:e.type==="iframe"?4:5),_(4),D(n.selectedObjectId()===e.id?6:-1)}}function qt(h,t){if(h&1){let e=S();d(0,"div",6)(1,"button",77),v("click",function(){p(e);let i=c();return u(i.returnToUrlWrapper())}),I(),d(2,"svg",78),M(3,"path",79),g()()()}}function Kt(h,t){if(h&1){let e=S();d(0,"div",80),v("click",function(){p(e);let i=c();return u(i.cancelUrlModal())}),d(1,"div",81),v("click",function(i){return p(e),u(i.stopPropagation())}),d(2,"h3"),k(3,"Add URL"),g(),d(4,"input",82,1),v("input",function(){p(e);let i=it(5),o=c();return u(o.urlInputValue.set(i.value))})("keydown.enter",function(){p(e);let i=c();return u(i.submitUrlModal())})("keydown.escape",function(){p(e);let i=c();return u(i.cancelUrlModal())}),g(),d(6,"div",83)(7,"button",84),v("click",function(){p(e);let i=c();return u(i.cancelUrlModal())}),k(8,"Cancel"),g(),d(9,"button",85),v("click",function(){p(e);let i=c();return u(i.submitUrlModal())}),k(10,"Add"),g()()()()}if(h&2){let e=c();_(4),C("value",e.urlInputValue())}}var lt=class h{platformId=$(J);sanitizer=$(Pt);injector=$(vt);baseSize=200;dataTokenPrefix="data-token-";dataFilePrefix="file-data-";minZoom=.1;maxZoom=5;hashUpdateHandle=null;hashThrottleMs=300;lastSerializedHash="";suppressHash=!1;hashDirty=!1;skipNextHashWrite=!1;readyForHashWrites=!1;initialFitDone=!1;restoredFromHash=!1;wheelFlushHandle=null;ephemeralTokens=new Map;defaultIframeWidth=600;defaultIframeHeight=400;defaultViewportWidth=1920;defaultViewportHeight=1080;transparentPixel="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMB/hsrLxkAAAAASUVORK5CYII=";touchStartDistance=0;touchStartZoom=1;isTouchPinching=!1;activeTouches=0;isMobile=x(!1);instructionsText=V(()=>this.isMobile()?"Tap to select \u2022 Pinch to zoom \u2022 Two fingers to pan":"Drag & drop images \u2022 Paste URLs (Ctrl/Cmd+V) \u2022 Scroll to zoom");objects=x([]);selectedObjectId=x(null);selectedObject=V(()=>{let t=this.selectedObjectId();return t?this.objects().find(e=>e.id===t):null});viewportX=x(0);viewportY=x(0);zoom=x(1);shareMenuOpen=x(!1);addMenuOpen=x(!1);showUrlModal=x(!1);urlInputValue=x("");cameFromUrlWrapper=x(!1);urlWrapperUrl=x(null);selectedAppIndex=x(0);apps=st;hasCustomData=V(()=>this.objects().some(t=>t.type==="image"&&t.sourceRef?.startsWith("data:")));isShuffling=x(!1);hoveredIframeId=x(null);interactiveIframeId=x(null);hoverTimeoutHandle=null;iframeScrollUpdateMap=new WeakMap;baseGridSize=20;gridScaleLevels=[.25,.5,1,2,4,8,16];minVisibleGridSize=8;maxVisibleGridSize=50;gridScale=x(1);gridSize=V(()=>this.baseGridSize*this.gridScale());apparentGridSize=V(()=>this.gridSize()*this.zoom());gridOpacity=V(()=>{let t=this.apparentGridSize();return t<this.minVisibleGridSize?Math.max(0,t/this.minVisibleGridSize):t>this.maxVisibleGridSize?Math.max(0,1-(t-this.maxVisibleGridSize)/(this.maxVisibleGridSize*.5)):1});zoomPercentage=V(()=>Math.round(this.zoom()*100));isDragging=!1;isTransforming=!1;isPanningCanvas=!1;dragStartX=0;dragStartY=0;transformStartX=0;transformStartY=0;transformHandle=null;originalObject=null;panStartViewportX=0;panStartViewportY=0;rotateStartAngle=0;rotateStartRotation=0;viewAnimationFrame=null;pendingInitialFitTimeout=null;pendingFitAfterImageLoad=!1;safeInsetTop=20;safeInsetBottom=100;safeInsetLeft=20;safeInsetRight=20;getVisibleViewportMetrics(){let t=Math.max(0,window.innerWidth-this.safeInsetLeft-this.safeInsetRight),e=Math.max(0,window.innerHeight-this.safeInsetTop-this.safeInsetBottom),n=this.safeInsetLeft+t/2,i=this.safeInsetTop+e/2;return{width:t,height:e,centerX:n,centerY:i}}transformHandles=[{type:"scale-nw",cursor:"nw-resize"},{type:"scale-ne",cursor:"ne-resize"},{type:"scale-sw",cursor:"sw-resize"},{type:"scale-se",cursor:"se-resize"},{type:"scale-w",cursor:"w-resize"},{type:"scale-e",cursor:"e-resize"},{type:"scale-n",cursor:"n-resize"},{type:"scale-s",cursor:"s-resize"},{type:"rotate",cursor:"grab"}];constructor(){if(O(this.platformId)){this.setupEventListeners(),window.addEventListener("hashchange",this.onHashChange),window.addEventListener("keydown",e=>this.onKeyDown(e)),Y(()=>{this.isMobile.set(this.detectMobile())}),G(()=>{this.viewportX(),this.viewportY(),this.zoom(),this.objects(),this.readyForHashWrites?this.scheduleHashUpdate():this.hashDirty=!0}),G(()=>{let e=this.zoom();this.updateGridScale(e)});let t="";try{sessionStorage.removeItem("canvasLastHash"),window.location.hash&&(t=window.location.hash)}catch{}this.restoredFromHash=!!t,this.suppressHash=!0,t&&this.applyHashState(t),this.suppressHash=!1,this.readyForHashWrites=!0,this.hashDirty&&this.scheduleHashUpdate(),Y(()=>{this.cleanupOrphanedStorage();try{let e=new URLSearchParams(window.location.search),n=e.get("shareUrl");if(n){this.cameFromUrlWrapper.set(!0),this.urlWrapperUrl.set(n);try{localStorage.setItem("wall-url",n)}catch(r){console.warn("[Canvas] Could not store wall-url",r)}this.objects().some(r=>r.sourceRef===n)||this.addUrlObject(n),this.pendingInitialFitTimeout!==null&&window.clearTimeout(this.pendingInitialFitTimeout),this.pendingInitialFitTimeout=window.setTimeout(()=>{this.pendingInitialFitTimeout!==null&&(this.animateFitToContent(),this.pendingInitialFitTimeout=null)},1500),e.delete("shareUrl");let o=window.location.pathname+(e.toString()?"?"+e.toString():"")+window.location.hash;window.history.replaceState(null,"",o)}}catch{}})}}onAppChange(t){this.selectedAppIndex.set(t);let e=this.apps[t];if(e)switch(e.id!=="frame"&&this.objects.update(n=>n.filter(i=>!i.isFrameObject)),e.id){case"centered":{this.animateFitToContent(!0);break}case"frame":{let n=this.objects();n.length>0&&!n.some(i=>i.isEmptyFrame)&&this.createEmptyFrame(),Q(this.injector,()=>{Y(()=>this.animateFitToContent(!0))});break}}}createEmptyFrame(){let t=this.objects().find(l=>!l.isFrameObject);if(!t)return;let e=t.width,n=t.height,i=Math.round(e*.7),o=Math.round(n*.3),r=t.x+i,s=t.y+o,a={id:this.generateId(),type:"image",x:r,y:s,width:e,height:n,rotation:0,content:"frame-placeholder",sourceRef:"frame-empty",originalAspectRatio:n/e,displayMode:"image",isEmptyFrame:!0,isFrameObject:!0};this.addObject(a),this.selectedObjectId.set(a.id)}addUrlObject(t){let e=this.defaultViewportWidth/2-this.defaultIframeWidth/2,n=this.defaultViewportHeight/2-this.defaultIframeHeight/2,i=this.defaultIframeWidth>0?this.defaultIframeHeight/this.defaultIframeWidth:1,o=this.zoom()||1,r={id:this.generateId(),type:"iframe",x:e/o,y:n/o,width:this.defaultIframeWidth,height:this.defaultIframeHeight,rotation:0,content:t,sourceRef:t,originalAspectRatio:i,safeUrl:this.sanitizer.bypassSecurityTrustResourceUrl(t),displayMode:"image"};this.addObject(r),this.pendingFitAfterImageLoad=!0,this.fetchOgImage(t,r.id)}onEmptyFrameUpload(t,e){let i=t.target.files?.[0];if(!i)return;let o=new FileReader;o.onload=r=>{let s=r.target?.result;if(s){let a=new Image;a.onload=()=>{let l=a.naturalWidth||a.width,m=a.naturalHeight||a.height,f=m>0&&l>0?m/l:1,b=this.objects().find(H=>!H.isFrameObject),w=b?b.width*b.height:this.defaultIframeWidth*this.defaultIframeHeight,T=Math.round(Math.sqrt(w/(f||1))),z=Math.round(Math.sqrt(w*(f||1)));this.objects.update(H=>H.map(L=>L.id===e?E(P({},L),{content:s,sourceRef:i.name,displayMode:"image",isEmptyFrame:!1,isFrameObject:!0,width:T,height:z,originalAspectRatio:f||1,safeUrl:this.sanitizer.bypassSecurityTrustResourceUrl(s)}):L)),Q(this.injector,()=>{Y(()=>this.animateFitToContent(!0))})},a.src=s}},o.readAsDataURL(i)}fitOnceAfterLoad(){this.initialFitDone||(this.initialFitDone=!0,Y(()=>this.animateFitToContent()))}animateFitToContent(t=!1){let e=this.computeFitToViewTargets();if(!t){let n=this.calculateCompositionBounds();if(n){let{centerY:i}=this.getVisibleViewportMetrics(),o=n.y+n.height/2;this.zoom.set(e.zoom*.5),this.viewportX.set(-n.width*e.zoom),this.viewportY.set(i-o*e.zoom*.5)}}this.animateToView(e.zoom,e.viewportX,e.viewportY,450)}animateToView(t,e,n,i=450){let o=this.zoom(),r=this.viewportX(),s=this.viewportY(),a=performance.now();this.viewAnimationFrame!==null&&(cancelAnimationFrame(this.viewAnimationFrame),this.viewAnimationFrame=null);let l=f=>1-Math.pow(1-f,3),m=()=>{let f=performance.now()-a,b=Math.min(1,f/i),w=l(b);this.zoom.set(o+(t-o)*w),this.viewportX.set(r+(e-r)*w),this.viewportY.set(s+(n-s)*w),b<1?this.viewAnimationFrame=requestAnimationFrame(m):this.viewAnimationFrame=null};this.viewAnimationFrame=requestAnimationFrame(m)}returnToUrlWrapper(){if(!O(this.platformId))return;let t=this.urlWrapperUrl()||localStorage.getItem("wall-url"),e=this.computeBasePath();t?window.location.href=`${e}?wallUrl=${encodeURIComponent(t)}`:window.location.href=e}shareVia(t){if(!O(this.platformId))return;let e=window.location.href,n=this.hasCustomData();switch(t){case"copy":n||this.copyToClipboard(e);break;case"whatsapp":n?this.shareImage():this.shareToWhatsApp(e);break;case"instagram":n?this.shareImage():this.shareToInstagram(e);break;case"upload":this.shareImage();break;case"download":this.downloadImage();break}}copyToClipboard(t){navigator.clipboard.writeText(t).then(()=>{alert("Link copied to clipboard!")}).catch(()=>{let e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select();try{document.execCommand("copy"),alert("Link copied to clipboard!")}catch(n){console.error("Failed to copy:",n)}document.body.removeChild(e)})}shareToWhatsApp(t){let n=`https://wa.me/?text=${encodeURIComponent("Check out this composition: "+t)}`;window.open(n,"_blank")}shareToInstagram(t){this.copyToClipboard(t),window.open("https://instagram.com","_blank")}shareToWeb(t){navigator.share?navigator.share({title:"Canvas Composition",text:"Check out this composition",url:t}).catch(e=>console.error("Share failed:",e)):this.copyToClipboard(t)}shareViaDownload(){this.downloadImage()}async shuffleImage(){if(O(this.platformId)&&!this.isShuffling()){this.isShuffling.set(!0);try{this.objects().filter(n=>n.type==="iframe").forEach(n=>{this.cleanupObjectStorage(n)}),this.objects.update(n=>n.filter(i=>i.type!=="iframe")),this.selectedObjectId.set(null);let e=await this.fetchRandomGradimUrl();if(e){this.addUrlObject(e),this.urlWrapperUrl.set(e);try{localStorage.setItem("wall-url",e)}catch(n){console.warn("[Canvas] Could not store wall-url",n)}}}catch(t){console.error("[Canvas] Error shuffling image:",t)}finally{this.isShuffling.set(!1)}}}async fetchRandomGradimUrl(){let t="https://gradim-wall.netlify.app",e="https://gradim.fh-potsdam.de/omeka-s/api/items?per_page=1&sort_by=random&fields[]=dcterms:identifier",n="https://gradim.fh-potsdam.de/omeka-s/api/items?per_page=1&sort_by=random";try{let i=await this.fetchIdentifierFromUrl(e)??await this.fetchIdentifierFromUrl(n);return i?`${t}/${i}`:null}catch{return null}}async fetchIdentifierFromUrl(t){try{let e=await fetch(t,{headers:{Accept:"application/json"}});if(!e.ok)return null;let n=await e.json();if(!Array.isArray(n)||n.length===0)return null;let i=n[0]?.["dcterms:identifier"]?.[0]?.["@value"];return typeof i=="string"?i:null}catch{return null}}computeBasePath(){let t=window.location.pathname,e=t.indexOf("/sample-reflect");return e>=0?t.substring(0,e+1):"/"}onHashChange=()=>{if(!O(this.platformId))return;let t=window.location.hash||"";if(!t||t==="#"){try{sessionStorage.removeItem("canvasLastHash")}catch{}this.lastSerializedHash="",this.suppressHash=!0,this.objects.set([]),this.selectedObjectId.set(null),this.viewportX.set(0),this.viewportY.set(0),this.zoom.set(1),this.suppressHash=!1,this.hashDirty=!1,this.skipNextHashWrite=!0;return}let e=this.serializeStateToHash(),n=e?`#${e}`:"";if(!(t===n||t===this.lastSerializedHash)){if(this.objects().length>0&&t.length<this.lastSerializedHash.length){this.lastSerializedHash=n;return}this.applyHashState(t),this.lastSerializedHash=t}};setupEventListeners(){window.addEventListener("paste",t=>this.onPaste(t)),window.addEventListener("dragover",t=>t.preventDefault()),window.addEventListener("wheel",t=>this.onWheel(t),{passive:!1}),window.addEventListener("touchstart",t=>this.onTouchStart(t),{passive:!1}),window.addEventListener("touchmove",t=>this.onTouchMove(t),{passive:!1}),window.addEventListener("touchend",t=>this.onTouchEnd(t),{passive:!1}),window.addEventListener("resize",()=>{this.isMobile.set(this.detectMobile())})}detectMobile(){if(!O(this.platformId))return!1;let t=window.innerWidth<=768,e="ontouchstart"in window||navigator.maxTouchPoints>0,n=navigator.userAgent.toLowerCase(),i=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(n);return t||e&&i}onDrop(t){t.preventDefault(),t.stopPropagation();let e=t.dataTransfer?.files;if(e&&e.length>0){let n=e[0];if(n.type.startsWith("image/")){let i=new FileReader;i.onload=()=>{let o=t.currentTarget,r=o?o.getBoundingClientRect():{left:0,top:0},s=t.clientX-r.left-this.viewportX(),a=t.clientY-r.top-this.viewportY(),l=i.result,m=this.deriveSourceRef(l,n.name),f=new Image;f.onload=()=>{let b=f.naturalHeight/f.naturalWidth||1;this.addObject({id:this.generateId(),type:"image",x:s/this.zoom(),y:a/this.zoom(),width:this.baseSize,height:this.baseSize*b,rotation:0,content:l,sourceRef:m,originalAspectRatio:b})},f.onerror=()=>{this.addObject({id:this.generateId(),type:"image",x:s/this.zoom(),y:a/this.zoom(),width:this.baseSize,height:this.baseSize,rotation:0,content:l,sourceRef:m,originalAspectRatio:1})},f.src=l},i.readAsDataURL(n)}}}onDragOver(t){t.preventDefault(),t.stopPropagation()}onPaste(t){let e=t.target,n=document.activeElement,i=r=>!!r&&(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.isContentEditable||r.closest(".url-input")!==null);if(i(e)||i(n))return;let o=t.clipboardData?.getData("text");if(o&&this.isValidUrl(o)){let r=this.deriveSourceRef(o),s={id:this.generateId(),type:"iframe",x:(window.innerWidth/2-this.viewportX())/this.zoom(),y:(window.innerHeight/2-this.viewportY())/this.zoom(),width:600,height:400,rotation:0,content:o,sourceRef:r,originalAspectRatio:400/600,safeUrl:this.sanitizer.bypassSecurityTrustResourceUrl(o),displayMode:"image"};this.addObject(s),this.fetchOgImage(o,s.id),t.preventDefault()}}onFileSelected(t){let e=t.target,n=e.files&&e.files[0];if(!n||!n.type.startsWith("image/"))return;let i=new FileReader;i.onload=()=>{let o=i.result,r=this.deriveSourceRef(o,n.name),s=new Image;s.onload=()=>{let a=s.naturalHeight/s.naturalWidth||1,l=(window.innerWidth/2-this.viewportX())/this.zoom(),m=(window.innerHeight/2-this.viewportY())/this.zoom();this.addObject({id:this.generateId(),type:"image",x:l-this.baseSize/2,y:m-this.baseSize*a/2,width:this.baseSize,height:this.baseSize*a,rotation:0,content:o,sourceRef:r,originalAspectRatio:a})},s.onerror=()=>{let a=(window.innerWidth/2-this.viewportX())/this.zoom(),l=(window.innerHeight/2-this.viewportY())/this.zoom();this.addObject({id:this.generateId(),type:"image",x:a-this.baseSize/2,y:l-this.baseSize/2,width:this.baseSize,height:this.baseSize,rotation:0,content:o,sourceRef:r,originalAspectRatio:1})},s.src=o},i.readAsDataURL(n),e.value=""}isValidUrl(t){try{return new URL(t),!0}catch{return!1}}async fetchOgImage(t,e){if(!O(this.platformId))return;let n=window.location.hostname.toLowerCase(),i=n==="localhost"||n==="127.0.0.1"||n==="::1",o=this.getGradimWallOgImage(t);if(o){this.updateObjectOgImage(e,o);return}if(!i){this.trySetDevelopmentOgImage(t,e);return}let r=!1;try{let s=`/api/url-metadata?url=${encodeURIComponent(t)}`,a=await fetch(s),l=a.headers.get("content-type");if(a.ok&&l?.includes("application/json")){let m=await a.json();m.ogImage&&(this.updateObjectOgImage(e,m.ogImage),r=!0)}}catch{}r||this.trySetDevelopmentOgImage(t,e)}trySetDevelopmentOgImage(t,e){try{let n=new URL(t),i=n.hostname.toLowerCase(),r={"github.com":"https://github.githubassets.com/images/modules/site/social-cards/github-social.png","www.github.com":"https://github.githubassets.com/images/modules/site/social-cards/github-social.png","youtube.com":"https://www.youtube.com/img/desktop/yt_1200.png","www.youtube.com":"https://www.youtube.com/img/desktop/yt_1200.png"}[i];!r&&i==="gradim-wall.netlify.app"&&(r=this.getGradimWallOgImage(n.toString())||void 0),r&&setTimeout(()=>{this.updateObjectOgImage(e,r)},500)}catch{}}getGradimWallOgImage(t){try{let e=new URL(t);if(e.hostname.toLowerCase()!=="gradim-wall.netlify.app")return null;let n=e.pathname.split("/").filter(Boolean),i=decodeURIComponent(n[n.length-1]||"");if(i&&/^[A-Za-z0-9_\-]+$/.test(i))return`https://gradim.fh-potsdam.de/omeka-s/files/large/${i}.jpg`}catch{}return null}extractOgImage(t){let e=t.match(/<meta[^>]*property=["']og:image["'][^>]*content=["']([^"']*)["'][^>]*>/i)||t.match(/<meta[^>]*content=["']([^"']*)["'][^>]*property=["']og:image["'][^>]*>/i);return e?e[1]:null}updateObjectOgImage(t,e){let n=new Image;n.onload=()=>{let i=n.naturalHeight/n.naturalWidth||1,o=600,r=o*i;this.objects.update(s=>s.map(a=>a.id===t?E(P({},a),{ogImage:e,width:o,height:r,originalAspectRatio:i,displayMode:"image"}):a)),this.scheduleHashUpdate(),this.pendingInitialFitTimeout!==null&&(window.clearTimeout(this.pendingInitialFitTimeout),this.pendingInitialFitTimeout=null),this.pendingFitAfterImageLoad&&(this.pendingFitAfterImageLoad=!1,this.animateFitToContent())},n.onerror=()=>{this.objects.update(i=>i.map(o=>o.id===t?E(P({},o),{ogImage:e}):o))},n.src=e}toggleDisplayMode(t){let e=this.objects().find(i=>i.id===t);if(!e||e.type!=="iframe"||!e.ogImage)return;let n=e.displayMode==="iframe"?"image":"iframe";this.objects.update(i=>i.map(o=>o.id===t?E(P({},o),{displayMode:n}):o)),this.scheduleHashUpdate()}setOgImageForTesting(t){if(!this.isValidUrl(t)){console.error("Invalid URL format:",t);return}let e=this.selectedObjectId();if(!e){console.warn("No object selected. Please select an iframe object first.");return}let n=this.objects().find(i=>i.id===e);if(!n||n.type!=="iframe"){console.warn("Selected object is not an iframe.");return}this.updateObjectOgImage(e,t),console.log("og:image set to:",t,"- toggle buttons should now be visible")}addObject(t){this.objects.update(e=>[...e,t]),this.selectedObjectId.set(t.id),this.scheduleHashUpdate()}onKeyDown(t){if(t.key!=="Backspace")return;let e=t.target;if(e&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable))return;let n=this.selectedObjectId();if(!n)return;t.preventDefault();let i=this.objects().find(o=>o.id===n);i&&this.cleanupObjectStorage(i),this.objects.update(o=>o.filter(r=>r.id!==n)),this.selectedObjectId.set(null)}onObjectClick(t,e){t.stopPropagation(),this.selectedObjectId.set(e),(this.objects().find(i=>i.id===e)?.type!=="iframe"||this.interactiveIframeId()!==e)&&(this.interactiveIframeId.set(null),this.updateAllIframeScrollStates())}onCanvasClick(t){let e=t.target,n=e===t.currentTarget||e.classList.contains("dot-grid")||e.classList.contains("canvas-objects");this.hashDirty&&this.scheduleHashUpdate(),n&&(this.selectedObjectId.set(null),this.interactiveIframeId.set(null),this.updateAllIframeScrollStates())}onCanvasMouseDown(t){if(t.target===t.currentTarget||t.target.classList.contains("dot-grid")){this.suppressHash=!0,this.selectedObjectId.set(null),this.isPanningCanvas=!0,this.dragStartX=t.clientX,this.dragStartY=t.clientY,this.panStartViewportX=this.viewportX(),this.panStartViewportY=this.viewportY();let e=i=>{if(!this.isPanningCanvas)return;let o=i.clientX-this.dragStartX,r=i.clientY-this.dragStartY;this.viewportX.set(this.panStartViewportX+o),this.viewportY.set(this.panStartViewportY+r)},n=()=>{this.isPanningCanvas=!1,this.suppressHash=!1,this.hashDirty&&this.scheduleHashUpdate(),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",n)};window.addEventListener("mousemove",e),window.addEventListener("mouseup",n)}}onCanvasTouchStart(t){if(t.touches.length===2){let e=t.target;if(e===t.currentTarget||e?.classList&&(e.classList.contains("dot-grid")||e.classList.contains("canvas-objects"))){t.preventDefault(),this.suppressHash=!0,this.selectedObjectId.set(null),this.isPanningCanvas=!0;let i=t.touches[0],o=t.touches[1],r=(i.clientX+o.clientX)/2,s=(i.clientY+o.clientY)/2;this.dragStartX=r,this.dragStartY=s,this.panStartViewportX=this.viewportX(),this.panStartViewportY=this.viewportY();let a=m=>{if(!this.isPanningCanvas||m.touches.length!==2)return;let f=m.touches[0],b=m.touches[1],w=(f.clientX+b.clientX)/2,T=(f.clientY+b.clientY)/2,z=w-this.dragStartX,H=T-this.dragStartY;this.viewportX.set(this.panStartViewportX+z),this.viewportY.set(this.panStartViewportY+H)},l=()=>{this.isPanningCanvas=!1,this.suppressHash=!1,this.hashDirty&&this.scheduleHashUpdate(),window.removeEventListener("touchmove",a),window.removeEventListener("touchend",l)};window.addEventListener("touchmove",a),window.addEventListener("touchend",l)}}}onObjectMouseMove(t,e){}onObjectMouseLeave(t){}updateAllIframeScrollStates(){setTimeout(()=>{document.querySelectorAll("iframe.object-content").forEach(e=>{let n=e,i=this.iframeScrollUpdateMap.get(n);i&&i()})},0)}clearHoverTimeout(){this.hoverTimeoutHandle&&(clearTimeout(this.hoverTimeoutHandle),this.hoverTimeoutHandle=null)}onIframeMouseEnter(t){this.clearHoverTimeout(),this.hoverTimeoutHandle=setTimeout(()=>{this.interactiveIframeId()!==t&&this.hoveredIframeId.set(t)},500)}onIframeMouseLeave(t){this.clearHoverTimeout(),this.hoveredIframeId()===t&&this.hoveredIframeId.set(null)}onIframeOverlayClick(t,e){t.stopPropagation(),this.interactiveIframeId.set(e),this.hoveredIframeId.set(null),this.clearHoverTimeout(),this.updateAllIframeScrollStates()}updateGridScale(t){let e=this.gridScaleLevels[0],n=1/0;for(let i of this.gridScaleLevels){let o=this.baseGridSize*i*t,r=(this.minVisibleGridSize+this.maxVisibleGridSize)/2,s=Math.abs(o-r);s<n&&(n=s,e=i)}this.gridScale.set(e)}computeFitToViewTargets(){if(this.objects().length===0)return{zoom:1,viewportX:0,viewportY:0};let e=this.calculateCompositionBounds();if(!e)return{zoom:1,viewportX:0,viewportY:0};let i=this.isMobile()?20:40,{width:o,height:r,centerX:s,centerY:a}=this.getVisibleViewportMetrics(),l=Math.max(0,o-2*i),m=Math.max(0,r-2*i),f=l/e.width,b=m/e.height,w=Math.min(f,b,this.maxZoom),T=e.x+e.width/2,z=e.y+e.height/2,H=s,L=a,q=H-T*w,X=L-z*w;return{zoom:w,viewportX:q,viewportY:X}}fitToView(){let{zoom:t,viewportX:e,viewportY:n}=this.computeFitToViewTargets();this.zoom.set(t),this.viewportX.set(e),this.viewportY.set(n)}onWheel(t){t.preventDefault(),this.suppressHash=!0;let n=t.deltaY>0?.9:1.1,i=Math.max(this.minZoom,Math.min(this.maxZoom,this.zoom()*n)),o=t.clientX,r=t.clientY,s=(o-this.viewportX())/this.zoom(),a=(r-this.viewportY())/this.zoom();this.zoom.set(i),this.viewportX.set(o-s*i),this.viewportY.set(r-a*i),this.wheelFlushHandle&&window.clearTimeout(this.wheelFlushHandle),this.wheelFlushHandle=window.setTimeout(()=>{this.suppressHash=!1,this.hashDirty&&this.scheduleHashUpdate(),this.wheelFlushHandle=null},300)}async onShareClick(){try{await this.shareComposition()}catch(t){console.error("Failed to share composition:",t)}}toggleAddMenu(){this.addMenuOpen.update(t=>!t),this.addMenuOpen()&&this.shareMenuOpen.set(!1)}onAddImageClick(){document.querySelector('input[type="file"]')?.click(),this.addMenuOpen.set(!1)}onAddUrlClick(){this.addMenuOpen.set(!1),this.urlInputValue.set(""),this.showUrlModal.set(!0),setTimeout(()=>{document.querySelector(".url-input")?.focus()},100)}submitUrlModal(){let t=this.urlInputValue().trim();this.showUrlModal.set(!1),t&&this.addIframeFromUrl(t)}cancelUrlModal(){this.showUrlModal.set(!1),this.urlInputValue.set("")}addIframeFromUrl(t){if(!this.isValidUrl(t)){console.warn("Invalid URL:",t);return}let e=this.deriveSourceRef(t),n=this.getGradimWallOgImage(t),i={id:this.generateId(),type:"iframe",x:(window.innerWidth/2-this.viewportX())/this.zoom(),y:(window.innerHeight/2-this.viewportY())/this.zoom(),width:600,height:400,rotation:0,content:t,sourceRef:e,originalAspectRatio:400/600,safeUrl:this.sanitizer.bypassSecurityTrustResourceUrl(t),displayMode:"image",ogImage:n??void 0};this.addObject(i),n||this.fetchOgImage(t,i.id)}onTouchStart(t){if(this.activeTouches=t.touches.length,t.touches.length===2){t.preventDefault(),this.isTouchPinching=!0,this.suppressHash=!0;let e=t.touches[0],n=t.touches[1];this.touchStartDistance=this.getTouchDistance(e,n),this.touchStartZoom=this.zoom()}else t.touches.length}onTouchMove(t){if(t.touches.length===2&&this.isTouchPinching){t.preventDefault();let e=t.touches[0],n=t.touches[1],i=this.getTouchDistance(e,n);if(this.touchStartDistance>0){let o=i/this.touchStartDistance,r=Math.max(this.minZoom,Math.min(this.maxZoom,this.touchStartZoom*o)),s=(e.clientX+n.clientX)/2,a=(e.clientY+n.clientY)/2,l=(s-this.viewportX())/this.zoom(),m=(a-this.viewportY())/this.zoom();this.zoom.set(r),this.viewportX.set(s-l*r),this.viewportY.set(a-m*r)}}}onTouchEnd(t){this.activeTouches=t.touches.length,t.touches.length<2&&(this.isTouchPinching=!1,this.touchStartDistance=0,t.touches.length===0&&(this.suppressHash=!1,this.hashDirty&&this.scheduleHashUpdate()))}getTouchDistance(t,e){let n=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(n*n+i*i)}onObjectMouseDown(t,e){t.preventDefault(),t.stopPropagation();let n=this.objects().find(r=>r.id===e);if(!n)return;this.isDragging=!0,this.suppressHash=!0,this.dragStartX=t.clientX,this.dragStartY=t.clientY,this.originalObject=P({},n),this.selectedObjectId.set(e);let i=r=>{if(!this.isDragging||!this.originalObject)return;let s=(r.clientX-this.dragStartX)/this.zoom(),a=(r.clientY-this.dragStartY)/this.zoom();this.objects.update(l=>l.map(m=>m.id===e?E(P({},m),{x:this.originalObject.x+s,y:this.originalObject.y+a}):m))},o=()=>{this.isDragging=!1,this.originalObject=null,this.suppressHash=!1,this.hashDirty&&this.scheduleHashUpdate(),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",i),window.addEventListener("mouseup",o)}onHandleMouseDown(t,e,n){t.preventDefault(),t.stopPropagation();let i=this.objects().find(s=>s.id===e);if(!i)return;this.isTransforming=!0,this.suppressHash=!0,this.transformStartX=t.clientX,this.transformStartY=t.clientY,this.transformHandle=n,this.originalObject=P({},i),this.rotateStartRotation=i.rotation,this.rotateStartAngle=this.getPointerAngle(i,t.clientX,t.clientY);let o=s=>{if(!this.isTransforming||!this.originalObject)return;let a=(s.clientX-this.transformStartX)/this.zoom(),l=(s.clientY-this.transformStartY)/this.zoom();this.transformHandle?.startsWith("rotate-")?this.handleRotate(e,s.clientX,s.clientY):this.transformHandle==="rotate"?this.handleRotate(e,s.clientX,s.clientY):this.transformHandle?.startsWith("scale-")&&this.handleScale(e,a,l,this.transformHandle)},r=()=>{this.isTransforming=!1,this.originalObject=null,this.transformHandle=null,this.suppressHash=!1,this.hashDirty&&this.scheduleHashUpdate(),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",r)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",r)}onObjectTouchStart(t,e){if(t.touches.length!==1)return;t.preventDefault(),t.stopPropagation();let n=this.objects().find(s=>s.id===e);if(!n)return;let i=t.touches[0];this.isDragging=!0,this.suppressHash=!0,this.dragStartX=i.clientX,this.dragStartY=i.clientY,this.originalObject=P({},n),this.selectedObjectId.set(e);let o=s=>{if(!this.isDragging||!this.originalObject||s.touches.length!==1)return;let a=s.touches[0],l=(a.clientX-this.dragStartX)/this.zoom(),m=(a.clientY-this.dragStartY)/this.zoom();this.objects.update(f=>f.map(b=>b.id===e?E(P({},b),{x:this.originalObject.x+l,y:this.originalObject.y+m}):b))},r=()=>{this.isDragging=!1,this.originalObject=null,this.suppressHash=!1,this.hashDirty&&this.scheduleHashUpdate(),window.removeEventListener("touchmove",o),window.removeEventListener("touchend",r)};window.addEventListener("touchmove",o),window.addEventListener("touchend",r)}onHandleTouchStart(t,e,n){if(t.touches.length!==1)return;t.preventDefault(),t.stopPropagation();let i=this.objects().find(a=>a.id===e);if(!i)return;let o=t.touches[0];this.isTransforming=!0,this.suppressHash=!0,this.transformStartX=o.clientX,this.transformStartY=o.clientY,this.transformHandle=n,this.originalObject=P({},i),this.rotateStartRotation=i.rotation,this.rotateStartAngle=this.getPointerAngle(i,o.clientX,o.clientY);let r=a=>{if(!this.isTransforming||!this.originalObject||a.touches.length!==1)return;let l=a.touches[0],m=(l.clientX-this.transformStartX)/this.zoom(),f=(l.clientY-this.transformStartY)/this.zoom();this.transformHandle?.startsWith("rotate-")?this.handleRotate(e,l.clientX,l.clientY):this.transformHandle==="rotate"?this.handleRotate(e,l.clientX,l.clientY):this.transformHandle?.startsWith("scale-")&&this.handleScale(e,m,f,this.transformHandle)},s=()=>{this.isTransforming=!1,this.originalObject=null,this.transformHandle=null,this.suppressHash=!1,this.hashDirty&&this.scheduleHashUpdate(),window.removeEventListener("touchmove",r),window.removeEventListener("touchend",s)};window.addEventListener("touchmove",r),window.addEventListener("touchend",s)}handleScale(t,e,n,i){if(!this.originalObject)return;let o=this.originalObject.width,r=this.originalObject.height,s=0,a=0;if(i==="scale-nw"){let l=(-e-n)/2;o=Math.max(50,this.originalObject.width+l),r=o*this.originalObject.originalAspectRatio,s=this.originalObject.width-o,a=this.originalObject.height-r}else if(i==="scale-ne"){let l=(e-n)/2;o=Math.max(50,this.originalObject.width+l),r=o*this.originalObject.originalAspectRatio,a=this.originalObject.height-r}else if(i==="scale-sw"){let l=(-e+n)/2;o=Math.max(50,this.originalObject.width+l),r=o*this.originalObject.originalAspectRatio,s=this.originalObject.width-o}else if(i==="scale-se"){let l=(e+n)/2;o=Math.max(50,this.originalObject.width+l),r=o*this.originalObject.originalAspectRatio}else i==="scale-w"?(o=Math.max(50,this.originalObject.width-e),r=this.originalObject.type==="image"?o*this.originalObject.originalAspectRatio:this.originalObject.height,s=this.originalObject.width-o,this.originalObject.type==="image"&&(a=(this.originalObject.height-r)/2)):i==="scale-e"?(o=Math.max(50,this.originalObject.width+e),r=this.originalObject.type==="image"?o*this.originalObject.originalAspectRatio:this.originalObject.height,this.originalObject.type==="image"&&(a=(this.originalObject.height-r)/2)):i==="scale-n"?(r=Math.max(50,this.originalObject.height-n),o=this.originalObject.type==="image"?r/this.originalObject.originalAspectRatio:this.originalObject.width,a=this.originalObject.height-r,this.originalObject.type==="image"&&(s=(this.originalObject.width-o)/2)):i==="scale-s"&&(r=Math.max(50,this.originalObject.height+n),o=this.originalObject.type==="image"?r/this.originalObject.originalAspectRatio:this.originalObject.width,this.originalObject.type==="image"&&(s=(this.originalObject.width-o)/2));this.objects.update(l=>l.map(m=>m.id===t?E(P({},m),{width:o,height:r,x:this.originalObject.x+s,y:this.originalObject.y+a}):m))}handleRotate(t,e,n){if(!this.originalObject)return;let i=this.objects().find(l=>l.id===t);if(!i)return;let r=this.getPointerAngle(i,e,n)-this.rotateStartAngle,s=this.rotateStartRotation+r,a=this.snapAngleWithin(s,45,2);this.objects.update(l=>l.map(m=>m.id===t?E(P({},m),{rotation:a}):m))}getPointerAngle(t,e,n){let i=(t.x+t.width/2)*this.zoom()+this.viewportX(),o=(t.y+t.height/2)*this.zoom()+this.viewportY();return Math.atan2(n-o,e-i)*(180/Math.PI)}getObjectStyle(t){return{left:`${t.x}px`,top:`${t.y}px`,width:`${t.width}px`,height:`${t.height}px`,transform:`rotate(${t.rotation}deg)`}}snapAngle(t,e=45){return Math.round(t/e)*e}snapAngleWithin(t,e=45,n=2){let i=Math.round(t/e)*e;return Math.abs(t-i)<=n?i:t}getHandlePosition(t,e){return{"scale-nw":{top:"-5px",left:"-5px"},"scale-ne":{top:"-5px",right:"-5px"},"scale-sw":{bottom:"-5px",left:"-5px"},"scale-se":{bottom:"-5px",right:"-5px"},rotate:{top:"-30px",left:"50%",transform:"translateX(-50%)"}}[e.type]||{}}getCanvasObjectsStyle(){return{transform:`translate(${this.viewportX()}px, ${this.viewportY()}px) scale(${this.zoom()})`,"transform-origin":"0 0"}}getDotGridStyle(){let e=this.gridSize()*this.zoom(),n=this.viewportX()%e,i=this.viewportY()%e;return{"background-size":`${e}px ${e}px`,"background-position":`${n}px ${i}px`,opacity:this.gridOpacity().toString()}}getInverseScaleStyle(t){let e=1/this.zoom();return{transform:`scale(${e})`,"--inverse-scale":e.toString()}}getSelectionBorderStyle(){return{"--inverse-scale":(1/this.zoom()).toString()}}onOgImageLoad(t,e){this.pendingFitAfterImageLoad&&(this.pendingFitAfterImageLoad=!1,this.animateFitToContent(!0))}onUserImageLoad(t,e){Q(this.injector,()=>{Y(()=>this.animateFitToContent(!0))})}onIframeLoad(t,e){let n=t.target;if(!n)return;let i=()=>{try{let o=n.contentDocument||n.contentWindow?.document||null;if(!o)return;let r=this.interactiveIframeId()===e,s=r?"auto":"hidden";o.documentElement&&(o.documentElement.style.overflow=s),o.body&&(o.body.style.overflow=s);let a=o.head?.querySelector("style[data-iframe-scroll]");if(a&&a.remove(),!r){let l=o.createElement("style");l.setAttribute("data-iframe-scroll","true"),l.textContent="::-webkit-scrollbar{display:none} html,body{overflow:hidden!important}",o.head?.appendChild(l)}}catch{}};i(),this.iframeScrollUpdateMap.set(n,i)}normalizeAngle180(t){let e=t%180;return e<0&&(e+=180),e}getCursorForHandle(t,e){let n=this.normalizeAngle180(t.rotation),i=n>=45&&n<=135,o=n<45||n>135;if(e.startsWith("scale-"))switch(e){case"scale-nw":case"scale-se":return o?"nwse-resize":"nesw-resize";case"scale-ne":case"scale-sw":return o?"nesw-resize":"nwse-resize";case"scale-w":case"scale-e":return i?"ns-resize":"ew-resize";case"scale-n":case"scale-s":return i?"ew-resize":"ns-resize"}return"move"}buildRotateCursorSvg(t){let e=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<g transform="rotate(${t} 12 12)">
<g clip-path="url(#clip0_325_17)">
<g filter="url(#filter0_d_325_17)">
<path d="M11 6C11.9193 6 12.8295 6.18106 13.6788 6.53284C14.5281 6.88463 15.2997 7.40024 15.9497 8.05025C16.5998 8.70026 17.1154 9.47194 17.4672 10.3212C17.8189 11.1705 18 12.0807 18 13V16H22L16 22L10 16H14V13C14 12.606 13.9224 12.2159 13.7716 11.8519C13.6209 11.488 13.3999 11.1573 13.1213 10.8787C12.8427 10.6001 12.512 10.3791 12.1481 10.2284C11.7841 10.0776 11.394 10 11 10H8V14L2 8L8 2V6H11Z" fill="white"/>
<path d="M11 9H7V11.5L3.5 8L7 4.5L7 7H11C11.7879 7 12.5682 7.15519 13.2961 7.45672C14.0241 7.75825 14.6855 8.20021 15.2426 8.75736C15.7998 9.31451 16.2418 9.97594 16.5433 10.7039C16.8448 11.4319 17 12.2121 17 13V17L19.5 17L16 20.5L12.5 17H15V13C15 12.4747 14.8965 11.9546 14.6955 11.4693C14.4945 10.984 14.1999 10.543 13.8284 10.1716C13.457 9.80014 13.016 9.5055 12.5307 9.30448C12.0454 9.10346 11.5253 9 11 9Z" fill="black"/>
</g>
</g>
<defs>
<filter id="filter0_d_325_17" x="0.2" y="1.2" width="23.6" height="23.6" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
<feFlood flood-opacity="0" result="BackgroundImageFix"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
<feOffset dy="1"/>
<feGaussianBlur stdDeviation="0.9"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.65 0"/>
<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_325_17"/>
<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_325_17" result="shape"/>
</filter>
<clipPath id="clip0_325_17">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>
</g>
</svg>`;return`url("data:image/svg+xml;utf8,${encodeURIComponent(e).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")}") 12 12, auto`}getRotateCursor(t,e){let i={ne:0,nw:270,sw:180,se:90}[e]+t.rotation;return this.buildRotateCursorSvg(i)}scheduleHashUpdate(){if(O(this.platformId)){if(this.skipNextHashWrite){this.skipNextHashWrite=!1,this.hashDirty=!1;return}if(!this.readyForHashWrites){this.hashDirty=!0;return}if(this.suppressHash){this.hashDirty=!0;return}this.hashUpdateHandle&&window.clearTimeout(this.hashUpdateHandle),this.hashUpdateHandle=window.setTimeout(()=>{let t=this.serializeStateToHash(),e=t?`#${t}`:"";if(e!==this.lastSerializedHash){window.location.hash=e,this.lastSerializedHash=e;try{sessionStorage.setItem("canvasLastHash",e)}catch{}}this.hashDirty=!1,this.hashUpdateHandle=null},this.hashThrottleMs)}}serializeStateToHash(){let t=[];t.push(this.serializeCanvasSegment());for(let e of this.objects())e.isFrameObject||e.isEmptyFrame||t.push(this.serializeObjectSegment(e));return t.join("#")}serializeCanvasSegment(){let t=this.roundNumber(this.viewportX()),e=this.roundNumber(this.viewportY()),n=this.roundNumber(this.zoom());return`canvas/${t},${e},${n}`}serializeObjectSegment(t){let e=this.roundNumber(t.x),n=this.roundNumber(t.y),i=this.roundNumber(t.width/this.baseSize),o=this.roundNumber(t.rotation),r=t.width===0?1:t.height/t.width,s=[`type:${t.type}`,`ratio:${this.roundNumber(r)}`];return t.displayMode&&s.push(`mode:${t.displayMode}`),t.ogImage&&s.push(`og:${encodeURIComponent(t.ogImage)}`),`${encodeURIComponent(t.sourceRef)}/${e},${n},${i},${o}/${s.join(",")}`}applyHashState(t){if(!O(this.platformId)||!t||t.length<=1)return;let e=t.substring(1).split("#").filter(Boolean);if(e.length===0)return;let n=[],i=new Set,o=this.viewportX(),r=this.viewportY(),s=this.zoom();for(let a of e){let l=[];for(let y=0;y<a.length;y++)a[y]==="/"&&l.push(y);if(l.length<2)continue;let m="",f="",b="";for(let y=l.length-2;y>=0;y--){let W=l[y],B=l[y+1];f=a.substring(W+1,B);let ft=f.split(",");if(ft.length===4&&ft.every(Vt=>!Number.isNaN(parseFloat(Vt)))){b=a.substring(0,W),m=a.substring(B+1);break}}if(!b||!b||!f)continue;let w=`${b}|${f}|${m??""}`;if(i.has(w))continue;i.add(w);let T=decodeURIComponent(b);if(T==="canvas"){let[y,W,B]=f.split(",").map(parseFloat);Number.isNaN(y)||(o=y),Number.isNaN(W)||(r=W),Number.isNaN(B)||(s=Math.max(this.minZoom,Math.min(this.maxZoom,B)));continue}let[z,H,L,q]=f.split(",").map(parseFloat);if([z,H,L,q].some(y=>Number.isNaN(y)))continue;let X=this.parseFlags(m),dt=X.get("ratio")??1,ut=typeof dt=="number"?dt:parseFloat(String(dt)),gt=Number.isNaN(ut)?1:ut,K=X.get("type")??"image",Tt=X.get("mode")??"image",zt=X.get("og")?decodeURIComponent(String(X.get("og"))):void 0,mt=this.baseSize*L,Ht=mt*gt,N=this.resolveContent(T,K);if(!N)if(K==="image")N=this.transparentPixel;else continue;n.push({id:this.generateId(),type:K,x:z,y:H,width:mt,height:Ht,rotation:q,content:N,sourceRef:T,originalAspectRatio:gt,safeUrl:K==="iframe"&&this.isValidUrl(N)?this.sanitizer.bypassSecurityTrustResourceUrl(N):void 0,ogImage:zt,displayMode:Tt})}this.viewportX.set(o),this.viewportY.set(r),this.zoom.set(s),this.objects.set(n),this.selectedObjectId.set(null),this.lastSerializedHash=t.startsWith("#")?t:`#${t}`;try{sessionStorage.setItem("canvasLastHash",this.lastSerializedHash)}catch{}!this.restoredFromHash&&n.length>0&&this.fitOnceAfterLoad();for(let a of n)a.type==="iframe"&&!a.ogImage&&this.isValidUrl(a.content)&&this.fetchOgImage(a.content,a.id)}resolveContent(t,e){if(t.startsWith("token:")){let i=t.substring(6);return this.readDataToken(i)??null}let n=this.readFileContent(t);return n||(e==="iframe"?this.isValidUrl(t)?t:null:t.startsWith("http://")||t.startsWith("https://")?t:null)}parseFlags(t){let e=new Map;if(!t)return e;for(let n of t.split(",")){let i=n.indexOf(":");if(i<=0)continue;let o=n.substring(0,i),r=n.substring(i+1);if(!o||r===void 0)continue;let s=parseFloat(r);e.set(o,Number.isNaN(s)?r:s)}return e}deriveSourceRef(t,e){if(!O(this.platformId))return t;if(t.startsWith("data:")){if(e){let i=this.makeFileKey(e);try{return localStorage.setItem(i,t),e}catch{}}return this.createDataToken(t)}return e??t}roundNumber(t){return Math.round(t*1e3)/1e3}createDataToken(t){let e=`${this.dataTokenPrefix}${Date.now()}-${Math.random().toString(36).slice(2,8)}`;try{localStorage.setItem(e,t)}catch{this.ephemeralTokens.set(e,t)}return`token:${e}`}readDataToken(t){try{let e=localStorage.getItem(t);if(e)return e}catch{}return this.ephemeralTokens.get(t)??null}makeFileKey(t){return`${this.dataFilePrefix}${t}`}readFileContent(t){let e=this.makeFileKey(t);try{return localStorage.getItem(e)}catch{return null}}generateId(){return"obj-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}cleanupObjectStorage(t){if(t.sourceRef&&!t.sourceRef.startsWith("token:")&&!t.sourceRef.startsWith("http")){let e=this.makeFileKey(t.sourceRef);try{localStorage.removeItem(e)}catch{}}else if(t.sourceRef?.startsWith("token:")){let e=t.sourceRef.substring(6);try{localStorage.removeItem(e)}catch{}this.ephemeralTokens.delete(e)}}cleanupOrphanedStorage(){if(O(this.platformId))try{let t=new Set;for(let n of this.objects())t.add(n.sourceRef);let e=[];for(let n=0;n<localStorage.length;n++){let i=localStorage.key(n);if(i){if(i.startsWith(this.dataTokenPrefix)){let o=`token:${i}`;t.has(o)||e.push(i)}else if(i.startsWith(this.dataFilePrefix)){let o=i.substring(this.dataFilePrefix.length);t.has(o)||e.push(i)}}}if(e.length>0)for(let n of e)localStorage.removeItem(n)}catch{}}async renderCompositionToBlob(){if(!O(this.platformId)||this.objects().length===0)return null;try{let t=this.calculateCompositionBounds();if(!t)return null;let e=1080,n=8,i=document.createElement("canvas");i.width=e,i.height=e;let o=i.getContext("2d");if(!o)return null;let r=e-2*n,s=r/t.width,a=r/t.height,l=Math.min(s,a),m=t.width*l,f=t.height*l,b=(e-m)/2,w=(e-f)/2;return await this.renderObjectsToCanvas(o,t,l,b,w),await new Promise(z=>{i.toBlob(z,"image/png")})}catch(t){return console.error("Error rendering composition:",t),null}}async shareComposition(){try{let t=await this.renderCompositionToBlob();if(!t)return;let e=navigator.canShare?.({files:[new File([],"probe",{type:"image/png"})]})??!1;if(navigator.share&&e){console.log("[Canvas] Share API available & canShare files, creating file...");let s={files:[new File([t],"composition.png",{type:"image/png"})]};console.log("[Canvas] Attempting to share with data:",s);try{await navigator.share(s),console.log("[Canvas] Share successful"),this.shareMenuOpen.set(!1);return}catch(a){let l=a instanceof Error?a.message:String(a);console.warn("[Canvas] Share failed, falling back:",l)}}else console.log("[Canvas] Share API not available or cannot share files; falling back to download");let n=URL.createObjectURL(t),i=document.createElement("a");i.href=n;let o=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);i.download=`composition-${o}.png`,i.click(),URL.revokeObjectURL(n),this.shareMenuOpen.set(!1)}catch(t){console.error("Error sharing composition:",t),this.shareMenuOpen.set(!1)}}async downloadImage(){try{let t=await this.renderCompositionToBlob();if(!t)return;if(this.isMobile()&&navigator.share){let r={files:[new File([t],"composition.png",{type:"image/png"})],title:"Composition"};try{await navigator.share(r);return}catch(s){console.log("Share cancelled or failed:",s)}}let e=URL.createObjectURL(t),n=document.createElement("a");n.href=e;let i=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);n.download=`composition-${i}.png`,n.click(),URL.revokeObjectURL(e)}catch(t){console.error("Error downloading image:",t)}}async shareImage(){try{console.log("[Canvas] shareImage() called");let t=await this.renderCompositionToBlob();if(!t){console.error("[Canvas] No blob generated");return}console.log("[Canvas] Blob created, size:",t.size);let e=navigator.canShare?.({files:[new File([],"probe",{type:"image/png"})]})??!1;if(navigator.share&&e)try{console.log("[Canvas] navigator.share available and canShare files, attempting to share blob directly");let i=new File([t],"composition.png",{type:"image/png"});await navigator.share({files:[i],title:"My Composition"}),console.log("[Canvas] Share successful");return}catch(i){let o=i;console.warn("[Canvas] Direct share failed (falling back):",o?.name,o?.message)}else console.log("[Canvas] navigator.share not available or cannot share files; falling back");let n=URL.createObjectURL(t);if(console.log("[Canvas] Created blob URL:",n),window.parent!==window)console.log("[Canvas] In iframe, sending to parent for share handling"),window.parent.postMessage({type:"shareImage",blobUrl:n,filename:"composition.png"},"*");else{console.log("[Canvas] Not in iframe, downloading directly");let i=document.createElement("a");i.href=n;let o=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);i.download=`composition-${o}.png`,i.click(),URL.revokeObjectURL(n)}}catch(t){console.error("[Canvas] Error in shareImage:",t)}}calculateCompositionBounds(){let t=this.objects();if(t.length===0)return null;let e=1/0,n=1/0,i=-1/0,o=-1/0;for(let r of t){let s=this.getObjectCorners(r);for(let a of s)e=Math.min(e,a.x),n=Math.min(n,a.y),i=Math.max(i,a.x),o=Math.max(o,a.y)}return{x:e,y:n,width:i-e,height:o-n}}getObjectCorners(t){let e=t.x+t.width/2,n=t.y+t.height/2,i=t.rotation*Math.PI/180,o=Math.cos(i),r=Math.sin(i);return[{x:-t.width/2,y:-t.height/2},{x:t.width/2,y:-t.height/2},{x:t.width/2,y:t.height/2},{x:-t.width/2,y:t.height/2}].map(a=>({x:e+a.x*o-a.y*r,y:n+a.x*r+a.y*o}))}async renderObjectsToCanvas(t,e,n,i,o){for(let r of this.objects()){t.save();let s=r.x-e.x,a=r.y-e.y,l=i+(s+r.width/2)*n,m=o+(a+r.height/2)*n;t.translate(l,m),t.rotate(r.rotation*Math.PI/180);let f=r.width*n,b=r.height*n;if(r.type==="image")try{let w=await this.loadImage(r.content);t.drawImage(w,-f/2,-b/2,f,b)}catch(w){console.warn("Failed to load image:",w),t.fillStyle="#ddd",t.fillRect(-f/2,-b/2,f,b)}else if(r.type==="iframe")if(r.ogImage&&r.displayMode!=="iframe")try{let w=await this.loadImage(r.ogImage);t.drawImage(w,-f/2,-b/2,f,b)}catch(w){console.warn("Failed to load og:image:",w),t.fillStyle="#ddd",t.fillRect(-f/2,-b/2,f,b)}else t.fillStyle="#fff",t.strokeStyle="#007bff",t.lineWidth=2,t.fillRect(-f/2,-b/2,f,b),t.strokeRect(-f/2,-b/2,f,b),t.fillStyle="#333",t.font=`${Math.max(12,b*.1)}px sans-serif`,t.textAlign="center",t.textBaseline="middle",t.fillText("Web Content",0,0);t.restore()}}loadImage(t){return new Promise((e,n)=>{let i=new Image;(t.startsWith("http://")||t.startsWith("https://"))&&(i.crossOrigin="anonymous"),i.onload=()=>e(i),i.onerror=()=>n(new Error("Failed to load image")),i.src=t})}static \u0275fac=function(e){return new(e||h)};static \u0275cmp=R({type:h,selectors:[["app-canvas"]],decls:52,vars:9,consts:[["fileInput",""],["urlInput",""],[1,"canvas-container",3,"click","mousedown","touchstart","drop","dragover"],[1,"dot-grid",3,"ngStyle"],[1,"canvas-objects",3,"ngStyle"],[1,"canvas-object",3,"selected","ngStyle"],[1,"close-button-container"],[1,"shuffle-button-container"],["title","Shuffle image",1,"shuffle-button",3,"click","disabled"],["width","20","height","20","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M18 14L22 18L18 22M18 2L22 6L18 10","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M2 18.0001H3.973C4.61949 18.0045 5.25742 17.8522 5.83215 17.5561C6.40687 17.26 6.90127 16.829 7.273 16.3001L12.727 7.7001C13.0987 7.17114 13.5931 6.74018 14.1679 6.44411C14.7426 6.14803 15.3805 5.99568 16.027 6.0001H22M2 6.0001H3.972C4.71746 5.99491 5.44954 6.19814 6.08564 6.58687C6.72174 6.9756 7.23655 7.53436 7.572 8.2001M22 18.0001H15.959C15.3036 17.9934 14.6598 17.8258 14.0844 17.5119C13.509 17.198 13.0195 16.7475 12.659 16.2001L12.3 15.7501","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"zoom-controls"],[1,"zoom-counter"],["title","Fit to view",1,"zoom-reset",3,"click"],["width","16","height","16","viewBox","0 0 16 16","fill","currentColor"],["d","M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707zm0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707zm-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707z"],[1,"canvas-instructions"],[1,"url-modal-overlay"],[3,"appChanged","selectedAppIndex"],[1,"share-menu-container"],[1,"share-menu"],["title","Copy link",1,"share-button","copy",3,"click","disabled"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.16854 14.8294L14.8255 9.17245M7.04654 11.2934L5.63254 12.7074C5.2611 13.0789 4.96645 13.5199 4.76543 14.0052C4.5644 14.4905 4.46094 15.0106 4.46094 15.5359C4.46094 16.0612 4.5644 16.5814 4.76543 17.0667C4.96645 17.552 5.2611 17.993 5.63254 18.3644C6.00398 18.7359 6.44495 19.0305 6.93027 19.2316C7.41558 19.4326 7.93574 19.536 8.46104 19.536C8.98634 19.536 9.5065 19.4326 9.99181 19.2316C10.4771 19.0305 10.9181 18.7359 11.2895 18.3644L12.7015 16.9504M11.2885 7.05045L12.7025 5.63645C13.074 5.265 13.515 4.97036 14.0003 4.76933C14.4856 4.56831 15.0057 4.46484 15.531 4.46484C16.0563 4.46484 16.5765 4.56831 17.0618 4.76933C17.5471 4.97036 17.9881 5.265 18.3595 5.63645C18.731 6.00789 19.0256 6.44886 19.2267 6.93417C19.4277 7.41949 19.5311 7.93965 19.5311 8.46495C19.5311 8.99025 19.4277 9.51041 19.2267 9.99572C19.0256 10.481 18.731 10.922 18.3595 11.2934L16.9455 12.7074","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["title","Share to...",1,"share-button","upload",3,"click"],["clip-path","url(#clip0_2892_191191)"],["d","M12 5V13.5M15 7L12 4L9 7M5 12V17C5 17.5304 5.21071 18.0391 5.58579 18.4142C5.96086 18.7893 6.46957 19 7 19H17C17.5304 19 18.0391 18.7893 18.4142 18.4142C18.7893 18.0391 19 17.5304 19 17V12","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["id","clip0_2892_191191"],["width","24","height","24","fill","white"],["title","Download",1,"share-button","download",3,"click"],["clip-path","url(#clip0_2892_191188)"],["d","M12 5V13.5M12 13.5L15 10.5M12 13.5L9 10.5M5 15V17C5 17.5304 5.21071 18.0391 5.58579 18.4142C5.96086 18.7893 6.46957 19 7 19H17C17.5304 19 18.0391 18.7893 18.4142 18.4142C18.7893 18.0391 19 17.5304 19 17V15","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["id","clip0_2892_191188"],["title","Share on WhatsApp",1,"share-button","whatsapp",3,"click"],["clip-path","url(#clip0_2892_191183)"],["d","M22.375 12.0195C22.375 17.5425 17.898 22.0195 12.375 22.0195C10.6195 22.022 8.89463 21.5604 7.375 20.6815L2.375 21.5195L3.207 16.0195C2.65735 14.7577 2.3741 13.3959 2.375 12.0195C2.375 6.49653 6.852 2.01953 12.375 2.01953C17.898 2.01953 22.375 6.49653 22.375 12.0195Z","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M13.3354 13.8875L15.4154 13.4815L17.3754 14.2345V16.0575C17.3754 16.6645 16.8534 17.1275 16.2654 16.9975C14.7424 16.6635 11.9754 15.8235 10.0534 13.8875C8.22337 12.0445 7.59837 9.47753 7.38537 8.06053C7.30037 7.49353 7.74937 7.01953 8.31837 7.01953H10.2124L10.9474 8.98853L10.5584 11.0895","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["id","clip0_2892_191183"],["title","Share on Instagram",1,"share-button","instagram",3,"click"],["viewBox","0 0 24 24","fill","currentColor"],["d","M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.057-1.645.069-4.849.069-3.204 0-3.584-.012-4.849-.069-3.259-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zM5.838 12a6.162 6.162 0 1 1 12.324 0 6.162 6.162 0 0 1-12.324 0zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm4.965-10.322a1.44 1.44 0 1 1 2.881.001 1.44 1.44 0 0 1-2.881-.001z"],[1,"canvas-object",3,"click","mousedown","touchstart","ngStyle"],[1,"hover-border",3,"ngStyle"],[1,"empty-frame-button"],["alt","Canvas image",1,"object-content",3,"src"],["alt","URL preview",1,"object-content",3,"src"],[1,"iframe-wrapper"],[1,"empty-frame-button",3,"click","touchstart"],[1,"plus-icon-center"],["type","file","accept","image/*","hidden","",3,"change"],["alt","Canvas image",1,"object-content",3,"load","src"],["alt","URL preview",1,"object-content",3,"load","src"],[1,"iframe-wrapper",3,"mouseenter","mouseleave"],["sandbox","allow-scripts allow-forms",1,"object-content",3,"load","src"],[1,"iframe-overlay"],[1,"iframe-overlay",3,"click"],[1,"iframe-overlay-message"],[1,"display-mode-toggle",3,"ngStyle"],[1,"selection-border",3,"ngStyle"],[1,"handle","handle-corner","handle-nw",3,"mousedown","touchstart","ngStyle"],[1,"handle","handle-corner","handle-ne",3,"mousedown","touchstart","ngStyle"],[1,"handle","handle-corner","handle-sw",3,"mousedown","touchstart","ngStyle"],[1,"handle","handle-corner","handle-se",3,"mousedown","touchstart","ngStyle"],[1,"handle","handle-edge","handle-w",3,"mousedown","touchstart","ngStyle"],[1,"handle","handle-edge","handle-e",3,"mousedown","touchstart","ngStyle"],[1,"handle","handle-edge","handle-n",3,"mousedown","touchstart","ngStyle"],[1,"handle","handle-edge","handle-s",3,"mousedown","touchstart","ngStyle"],[1,"rotation-indicator","rotation-nw",3,"mousedown","touchstart","ngStyle"],[1,"rotation-indicator","rotation-ne",3,"mousedown","touchstart","ngStyle"],[1,"rotation-indicator","rotation-sw",3,"mousedown","touchstart","ngStyle"],[1,"rotation-indicator","rotation-se",3,"mousedown","touchstart","ngStyle"],["title","Show as image",1,"toggle-btn",3,"click"],["d","M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"],["d","M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"],["title","Show as website",1,"toggle-btn",3,"click"],["d","M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"],["title","Return to URL wrapper",1,"close-button",3,"click"],["width","20","height","20","viewBox","0 0 20 20","fill","currentColor"],["d","M15 10l-1.5-1.5L9 13V3H7v10L2.5 8.5 1 10l6 6z"],[1,"url-modal-overlay",3,"click"],[1,"url-modal",3,"click"],["type","url","placeholder","Paste URL here...",1,"url-input",3,"input","keydown.enter","keydown.escape","value"],[1,"url-modal-actions"],[1,"url-cancel",3,"click"],[1,"url-submit",3,"click"]],template:function(e,n){e&1&&(d(0,"div",2),v("click",function(o){return n.onCanvasClick(o)})("mousedown",function(o){return n.onCanvasMouseDown(o)})("touchstart",function(o){return n.onCanvasTouchStart(o)})("drop",function(o){return n.onDrop(o)})("dragover",function(o){return n.onDragOver(o)}),M(1,"div",3),d(2,"div",4),et(3,Zt,7,6,"div",5,Rt),g(),F(5,qt,4,0,"div",6),d(6,"div",7)(7,"button",8),v("click",function(){return n.shuffleImage()}),I(),d(8,"svg",9),M(9,"path",10)(10,"path",11),g()()(),U(),d(11,"div",12)(12,"div",13),k(13),g(),d(14,"button",14),v("click",function(){return n.fitToView()}),I(),d(15,"svg",15),M(16,"path",16),g()()(),U(),d(17,"div",17)(18,"p"),k(19),g()(),F(20,Kt,11,1,"div",18),d(21,"app-canvas-carousel",19),v("appChanged",function(o){return n.onAppChange(o)}),g()(),d(22,"div",20)(23,"div",21)(24,"button",22),v("click",function(){return n.shareVia("copy")}),I(),d(25,"svg",23),M(26,"path",24),g()(),U(),d(27,"button",25),v("click",function(){return n.shareVia("upload")}),I(),d(28,"svg",23)(29,"g",26),M(30,"path",27),g(),d(31,"defs")(32,"clipPath",28),M(33,"rect",29),g()()()(),U(),d(34,"button",30),v("click",function(){return n.shareVia("download")}),I(),d(35,"svg",23)(36,"g",31),M(37,"path",32),g(),d(38,"defs")(39,"clipPath",33),M(40,"rect",29),g()()()(),U(),d(41,"button",34),v("click",function(){return n.shareVia("whatsapp")}),I(),d(42,"svg",23)(43,"g",35),M(44,"path",36)(45,"path",37),g(),d(46,"defs")(47,"clipPath",38),M(48,"rect",29),g()()()(),U(),d(49,"button",39),v("click",function(){return n.shareVia("instagram")}),I(),d(50,"svg",40),M(51,"path",41),g()()()()),e&2&&(_(),C("ngStyle",n.getDotGridStyle()),_(),C("ngStyle",n.getCanvasObjectsStyle()),_(),nt(n.objects()),_(2),D(n.cameFromUrlWrapper()?5:-1),_(2),C("disabled",n.isShuffling()),_(6),Mt("",n.zoomPercentage(),"%"),_(6),Z(n.instructionsText()),_(),D(n.showUrlModal()?20:-1),_(),C("selectedAppIndex",n.selectedAppIndex()),_(3),C("disabled",n.hasCustomData()))},dependencies:[at,rt,ct],styles:['[_nghost-%COMP%]{display:block;width:100%;height:100%}@keyframes _ngcontent-%COMP%_fadeOutInstructions{0%{opacity:1;visibility:visible}to{opacity:0;visibility:hidden}}@keyframes _ngcontent-%COMP%_fadeInZoom{0%{opacity:0;visibility:hidden}to{opacity:1;visibility:visible}}.canvas-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;overflow:hidden;background-color:#121212;cursor:grab}.canvas-container[_ngcontent-%COMP%]:active{cursor:grabbing}.dot-grid[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-image:radial-gradient(circle,rgba(255,255,255,.2) 1px,transparent 1px);background-size:20px 20px;background-position:0 0;pointer-events:none;z-index:1;transition:opacity .3s ease-in-out}.canvas-objects[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2;pointer-events:none}.canvas-object[_ngcontent-%COMP%]{position:absolute;box-sizing:border-box;cursor:move;-webkit-user-select:none;user-select:none;pointer-events:auto}.canvas-object.selected[_ngcontent-%COMP%]   .selection-border[_ngcontent-%COMP%]{display:block}.canvas-object[_ngcontent-%COMP%]   .object-content[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;pointer-events:none;display:block;border:none;position:relative;z-index:1}.canvas-object[_ngcontent-%COMP%]   .iframe-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.canvas-object[_ngcontent-%COMP%]   .empty-frame-button[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;border:8px solid white;box-shadow:0 4px 12px #00000026;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;position:relative;box-sizing:border-box}.canvas-object[_ngcontent-%COMP%]   .empty-frame-button[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #0003}.canvas-object[_ngcontent-%COMP%]   .empty-frame-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.canvas-object[_ngcontent-%COMP%]   .plus-icon-center[_ngcontent-%COMP%]{font-size:80px;color:#ccc;line-height:1;font-weight:300;-webkit-user-select:none;user-select:none;pointer-events:none}.canvas-object[_ngcontent-%COMP%]   iframe.object-content[_ngcontent-%COMP%]{overflow:hidden;scrollbar-width:none;transition:opacity .2s ease-in-out}.canvas-object[_ngcontent-%COMP%]   iframe.object-content.dimmed[_ngcontent-%COMP%]{opacity:.4}.canvas-object[_ngcontent-%COMP%]   iframe.object-content.interactive[_ngcontent-%COMP%]{pointer-events:auto;opacity:1;overflow:auto!important;scrollbar-width:auto}.canvas-object[_ngcontent-%COMP%]   iframe.object-content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.canvas-object[_ngcontent-%COMP%]   iframe.object-content.interactive[_ngcontent-%COMP%]::-webkit-scrollbar{display:block;width:12px;height:12px}.canvas-object[_ngcontent-%COMP%]   iframe.object-content.interactive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0000004d;border-radius:6px}.canvas-object[_ngcontent-%COMP%]   iframe.object-content.interactive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#0000001a}.canvas-object[_ngcontent-%COMP%]   .iframe-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000059;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:1;pointer-events:auto}.canvas-object[_ngcontent-%COMP%]   .iframe-overlay[_ngcontent-%COMP%]   .iframe-overlay-message[_ngcontent-%COMP%]{background-color:#1e1e1ef2;color:#f0f0f0;padding:12px 24px;border-radius:8px;font-size:16px;font-weight:600;box-shadow:0 2px 12px #0006;-webkit-user-select:none;user-select:none;transition:transform .1s ease}.canvas-object[_ngcontent-%COMP%]   .iframe-overlay[_ngcontent-%COMP%]   .iframe-overlay-message[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.canvas-object[_ngcontent-%COMP%]   .selection-border[_ngcontent-%COMP%]{display:none;position:absolute;top:0;left:0;width:100%;height:100%;border-style:solid;border-color:#007bff;border-width:calc(1px * var(--inverse-scale, 1));box-sizing:border-box;pointer-events:none;transform-origin:0 0}.canvas-object[_ngcontent-%COMP%]:hover   .selection-border[_ngcontent-%COMP%]{border-width:calc(3px * var(--inverse-scale, 1))}.canvas-object[_ngcontent-%COMP%]   .hover-border[_ngcontent-%COMP%]{display:none;position:absolute;top:0;left:0;width:100%;height:100%;border-style:solid;border-color:#007bff;border-width:calc(1px * var(--inverse-scale, 1));box-sizing:border-box;pointer-events:none;transform-origin:0 0}.canvas-object[_ngcontent-%COMP%]:hover   .hover-border[_ngcontent-%COMP%]{display:block}.canvas-object[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{position:absolute;pointer-events:all;z-index:15;-webkit-user-select:none;user-select:none;transform-origin:center}.canvas-object[_ngcontent-%COMP%]   .handle.handle-corner[_ngcontent-%COMP%]{width:12px;height:12px;background-color:#007bff;border:1px solid white;box-sizing:border-box}.canvas-object[_ngcontent-%COMP%]   .handle.handle-corner.handle-nw[_ngcontent-%COMP%]{top:-6px;left:-6px;cursor:nwse-resize}.canvas-object[_ngcontent-%COMP%]   .handle.handle-corner.handle-ne[_ngcontent-%COMP%]{top:-6px;right:-6px;cursor:nesw-resize}.canvas-object[_ngcontent-%COMP%]   .handle.handle-corner.handle-sw[_ngcontent-%COMP%]{bottom:-6px;left:-6px;cursor:nesw-resize}.canvas-object[_ngcontent-%COMP%]   .handle.handle-corner.handle-se[_ngcontent-%COMP%]{bottom:-6px;right:-6px;cursor:nwse-resize}.canvas-object[_ngcontent-%COMP%]   .handle.handle-corner[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:scale(1.3)}.canvas-object[_ngcontent-%COMP%]   .handle.handle-edge[_ngcontent-%COMP%]{background-color:transparent;border:none}.canvas-object[_ngcontent-%COMP%]   .handle.handle-edge.handle-w[_ngcontent-%COMP%]{top:0;left:-4px;width:8px;height:100%;cursor:w-resize}.canvas-object[_ngcontent-%COMP%]   .handle.handle-edge.handle-e[_ngcontent-%COMP%]{top:0;right:-4px;width:8px;height:100%;cursor:e-resize}.canvas-object[_ngcontent-%COMP%]   .handle.handle-edge.handle-n[_ngcontent-%COMP%]{top:-4px;left:0;width:100%;height:8px;cursor:n-resize}.canvas-object[_ngcontent-%COMP%]   .handle.handle-edge.handle-s[_ngcontent-%COMP%]{bottom:-4px;left:0;width:100%;height:8px;cursor:s-resize}.canvas-object[_ngcontent-%COMP%]   .rotation-indicator[_ngcontent-%COMP%]{position:absolute;transform-origin:center;width:20px;height:20px;pointer-events:all;z-index:15;cursor:grab}.canvas-object[_ngcontent-%COMP%]   .rotation-indicator[_ngcontent-%COMP%]:hover{cursor:grab}.canvas-object[_ngcontent-%COMP%]   .rotation-indicator[_ngcontent-%COMP%]:active{cursor:grabbing}.canvas-object[_ngcontent-%COMP%]   .rotation-indicator[_ngcontent-%COMP%]:before{content:"";position:absolute;width:4px;height:4px;background-color:#28a745;border-radius:50%;top:50%;left:50%;transform:translate(-50%,-50%)}.canvas-object[_ngcontent-%COMP%]   .rotation-indicator.rotation-nw[_ngcontent-%COMP%]{top:-30px;left:-30px}.canvas-object[_ngcontent-%COMP%]   .rotation-indicator.rotation-ne[_ngcontent-%COMP%]{top:-30px;right:-30px}.canvas-object[_ngcontent-%COMP%]   .rotation-indicator.rotation-sw[_ngcontent-%COMP%]{bottom:-30px;left:-30px}.canvas-object[_ngcontent-%COMP%]   .rotation-indicator.rotation-se[_ngcontent-%COMP%]{bottom:-30px;right:-30px}.canvas-object[_ngcontent-%COMP%]   .display-mode-toggle[_ngcontent-%COMP%]{position:absolute;top:-50px;left:50%;transform:translate(-50%);transform-origin:center;display:flex;gap:4px;background-color:#1e1e1ef2;padding:4px;border-radius:6px;box-shadow:0 2px 8px #0006;pointer-events:all;z-index:20}.canvas-object[_ngcontent-%COMP%]   .display-mode-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background-color:#1f1f1f;border:1px solid #3a3a3a;border-radius:4px;cursor:pointer;transition:all .2s;color:#cfcfcf;padding:0}.canvas-object[_ngcontent-%COMP%]   .display-mode-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background-color:#2a2a2a;border-color:#5a5a5a;color:#fff}.canvas-object[_ngcontent-%COMP%]   .display-mode-toggle[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;color:#fff}.canvas-object[_ngcontent-%COMP%]   .display-mode-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.canvas-instructions[_ngcontent-%COMP%]{position:absolute;top:20px;left:50%;transform:translate(-50%);background-color:#141414e6;padding:12px 24px;border-radius:8px;box-shadow:0 2px 8px #0006;z-index:100;pointer-events:none;animation:_ngcontent-%COMP%_fadeOutInstructions .5s ease-out 3s forwards}.canvas-instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#e6e6e6;font-size:14px;font-weight:500}.url-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;z-index:200;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.url-modal[_ngcontent-%COMP%]{background-color:#1e1e1efa;border:1px solid rgba(255,255,255,.2);border-radius:12px;padding:24px;max-width:500px;width:calc(100% - 40px);box-shadow:0 4px 20px #00000080}.url-modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;color:#fff;font-size:18px;font-weight:600}.url-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background-color:#0006;border:1px solid rgba(255,255,255,.2);border-radius:8px;color:#fff;font-size:14px;outline:none;transition:all .2s;box-sizing:border-box;-webkit-text-fill-color:#fff;background-clip:padding-box}.url-input[_ngcontent-%COMP%]::placeholder{color:#999}.url-input[_ngcontent-%COMP%]:focus{border-color:#fff6;background-color:#0009}.url-modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:20px;justify-content:flex-end}.url-modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;border:none;transition:all .2s}.url-cancel[_ngcontent-%COMP%]{background-color:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2)}.url-cancel[_ngcontent-%COMP%]:hover{background-color:#fff3}.url-submit[_ngcontent-%COMP%]{background-color:#ffffff26;color:#fff;border:1px solid rgba(255,255,255,.25)}.url-submit[_ngcontent-%COMP%]:hover{background-color:#ffffff40;border-color:#fff6}.close-button-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:20px;z-index:100;pointer-events:auto}.shuffle-button-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:100;pointer-events:auto}.shuffle-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:48px;height:48px;padding:0;background-color:#141414f2;color:#e6e6e6;border:1px solid rgba(255,255,255,.1);border-radius:8px;cursor:pointer;box-shadow:0 2px 12px #00000080;transition:all .2s ease;animation:_ngcontent-%COMP%_fadeInZoom .5s ease-in 3s forwards}.shuffle-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.shuffle-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1e1e1efa;border-color:#fff3;box-shadow:0 4px 16px #0009}.shuffle-button[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.95)}.shuffle-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.close-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:48px;height:48px;padding:0;background-color:#141414f2;color:#e6e6e6;border:1px solid rgba(255,255,255,.1);border-radius:8px;cursor:pointer;box-shadow:0 2px 12px #00000080;transition:all .2s ease}.close-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;transform:rotate(180deg)}.close-button[_ngcontent-%COMP%]:hover{background-color:#1e1e1efa;border-color:#fff3;transform:translate(-2px);box-shadow:0 4px 16px #0009}.close-button[_ngcontent-%COMP%]:active{transform:translate(0);box-shadow:0 2px 8px #0006}.zoom-controls[_ngcontent-%COMP%]{position:absolute;top:8px;left:50%;transform:translate(-50%);display:flex;align-items:center;gap:8px;background-color:#141414f2;padding:8px 16px;border-radius:8px;box-shadow:0 2px 12px #00000080;z-index:100;pointer-events:auto;opacity:0;animation:_ngcontent-%COMP%_fadeInZoom .5s ease-in 3s forwards}.zoom-controls[_ngcontent-%COMP%]   .zoom-counter[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#e6e6e6;min-width:50px;text-align:center}.zoom-controls[_ngcontent-%COMP%]   .zoom-reset[_ngcontent-%COMP%]{background-color:#000;color:#999;border:none;border-radius:4px;padding:6px 12px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;min-height:28px}.zoom-controls[_ngcontent-%COMP%]   .zoom-reset[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block}.zoom-controls[_ngcontent-%COMP%]   .zoom-reset[_ngcontent-%COMP%]:hover{background-color:#1a1a1a;color:#ccc}.zoom-controls[_ngcontent-%COMP%]   .zoom-reset[_ngcontent-%COMP%]:active{background-color:#2a2a2a}.share-controls[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;display:flex;align-items:center;gap:8px;background-color:#141414f2;padding:8px 16px;border-radius:8px;box-shadow:0 2px 12px #00000080;z-index:100;pointer-events:auto}.share-controls[_ngcontent-%COMP%]   .download-button[_ngcontent-%COMP%], .share-controls[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]{color:#fff;border:none;border-radius:4px;padding:8px 16px;font-size:13px;font-weight:500;cursor:pointer;transition:background-color .2s}.share-controls[_ngcontent-%COMP%]   .download-button[_ngcontent-%COMP%]:disabled, .share-controls[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed;opacity:.6}.share-controls[_ngcontent-%COMP%]   .download-button[_ngcontent-%COMP%]{background-color:#007bff}.share-controls[_ngcontent-%COMP%]   .download-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.share-controls[_ngcontent-%COMP%]   .download-button[_ngcontent-%COMP%]:active:not(:disabled){background-color:#004085}.share-controls[_ngcontent-%COMP%]   .share-menu-container[_ngcontent-%COMP%]{position:relative}.share-controls[_ngcontent-%COMP%]   .share-menu-container[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]{background-color:#28a745}.share-controls[_ngcontent-%COMP%]   .share-menu-container[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#218838}.share-controls[_ngcontent-%COMP%]   .share-menu-container[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]:active:not(:disabled){background-color:#1e7e34}.share-controls[_ngcontent-%COMP%]   .share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]{position:absolute;bottom:100%;right:0;background-color:#1e1e1efa;border:1px solid rgba(255,255,255,.15);border-radius:8px;box-shadow:0 -4px 16px #0009;margin-bottom:8px;min-width:160px;overflow:hidden;z-index:101}.share-controls[_ngcontent-%COMP%]   .share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-menu-item[_ngcontent-%COMP%]{display:block;width:100%;text-align:left;color:#fff;border:none;background:none;padding:12px 16px;font-size:13px;cursor:pointer;transition:background-color .2s}.share-controls[_ngcontent-%COMP%]   .share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-menu-item[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.share-controls[_ngcontent-%COMP%]   .share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-menu-item[_ngcontent-%COMP%]:active{background-color:#ffffff26}.share-controls[_ngcontent-%COMP%]   .share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-menu-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgba(255,255,255,.08)}.visually-hidden-input[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.add-fab[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:110;display:block}.add-fab[_ngcontent-%COMP%]   .add-main[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;background-color:#ffffff26;color:#fff;border:1px solid rgba(255,255,255,.25);box-shadow:0 2px 12px #00000080;cursor:pointer;font-size:24px;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .2s}.add-fab[_ngcontent-%COMP%]   .add-main[_ngcontent-%COMP%]:hover{background-color:#ffffff40;border-color:#fff6}.add-fab[_ngcontent-%COMP%]   .add-menu[_ngcontent-%COMP%]{position:absolute;bottom:68px;right:0;background:#1e1e1ef2;border:1px solid rgba(255,255,255,.2);border-radius:8px;box-shadow:0 2px 12px #00000080;padding:8px;display:flex;flex-direction:column;gap:6px;min-width:140px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.add-fab[_ngcontent-%COMP%]   .add-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2);border-radius:6px;padding:10px 12px;font-size:14px;text-align:left;cursor:pointer;white-space:nowrap;transition:all .2s}.add-fab[_ngcontent-%COMP%]   .add-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#fff3;border-color:#fff6}.share-fab[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:20px;z-index:110;display:block}.share-fab[_ngcontent-%COMP%]   .share-main[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;background-color:#ffffff26;color:#fff;border:1px solid rgba(255,255,255,.25);box-shadow:0 2px 12px #00000080;cursor:pointer;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .2s}.share-fab[_ngcontent-%COMP%]   .share-main[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#ffffff40;border-color:#fff6}.share-fab[_ngcontent-%COMP%]   .share-main[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.share-fab[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]{position:absolute;bottom:68px;left:0;background:#5a5a5a;border:1px solid rgba(255,255,255,.2);border-radius:8px;box-shadow:0 2px 12px #00000080;padding:8px;display:flex;flex-direction:column;gap:6px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.share-fab[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2);border-radius:6px;padding:10px 12px;font-size:14px;text-align:left;cursor:pointer;transition:all .2s}.share-fab[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:#fff3;border-color:#fff6}.share-fab[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}@media(max-width:768px){.canvas-object[_ngcontent-%COMP%]   .handle.handle-corner[_ngcontent-%COMP%]{width:20px;height:20px}.canvas-object[_ngcontent-%COMP%]   .handle.handle-corner.handle-nw[_ngcontent-%COMP%]{top:-10px;left:-10px}.canvas-object[_ngcontent-%COMP%]   .handle.handle-corner.handle-ne[_ngcontent-%COMP%]{top:-10px;right:-10px}.canvas-object[_ngcontent-%COMP%]   .handle.handle-corner.handle-sw[_ngcontent-%COMP%]{bottom:-10px;left:-10px}.canvas-object[_ngcontent-%COMP%]   .handle.handle-corner.handle-se[_ngcontent-%COMP%]{bottom:-10px;right:-10px}.canvas-object[_ngcontent-%COMP%]   .handle.handle-edge.handle-w[_ngcontent-%COMP%], .canvas-object[_ngcontent-%COMP%]   .handle.handle-edge.handle-e[_ngcontent-%COMP%]{width:16px;left:-8px}.canvas-object[_ngcontent-%COMP%]   .handle.handle-edge.handle-e[_ngcontent-%COMP%]{right:-8px;left:auto}.canvas-object[_ngcontent-%COMP%]   .handle.handle-edge.handle-n[_ngcontent-%COMP%], .canvas-object[_ngcontent-%COMP%]   .handle.handle-edge.handle-s[_ngcontent-%COMP%]{height:16px;top:-8px}.canvas-object[_ngcontent-%COMP%]   .handle.handle-edge.handle-s[_ngcontent-%COMP%]{bottom:-8px;top:auto}.canvas-object[_ngcontent-%COMP%]   .rotation-indicator[_ngcontent-%COMP%]{width:32px;height:32px}.canvas-object[_ngcontent-%COMP%]   .rotation-indicator[_ngcontent-%COMP%]:before{width:8px;height:8px}.canvas-object[_ngcontent-%COMP%]   .rotation-indicator.rotation-nw[_ngcontent-%COMP%]{top:-40px;left:-40px}.canvas-object[_ngcontent-%COMP%]   .rotation-indicator.rotation-ne[_ngcontent-%COMP%]{top:-40px;right:-40px}.canvas-object[_ngcontent-%COMP%]   .rotation-indicator.rotation-sw[_ngcontent-%COMP%]{bottom:-40px;left:-40px}.canvas-object[_ngcontent-%COMP%]   .rotation-indicator.rotation-se[_ngcontent-%COMP%]{bottom:-40px;right:-40px}.canvas-object[_ngcontent-%COMP%]   .display-mode-toggle[_ngcontent-%COMP%]{top:-60px;padding:6px;gap:6px}.canvas-object[_ngcontent-%COMP%]   .display-mode-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{width:44px;height:44px}.canvas-object[_ngcontent-%COMP%]   .display-mode-toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.canvas-instructions[_ngcontent-%COMP%]{top:12px;left:12px;right:12px;transform:none;padding:10px 16px}.canvas-instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;line-height:1.4;text-align:center}.zoom-controls[_ngcontent-%COMP%]{padding:10px 16px;gap:12px}.zoom-controls[_ngcontent-%COMP%]   .zoom-counter[_ngcontent-%COMP%]{font-size:16px;min-width:60px}.zoom-controls[_ngcontent-%COMP%]   .zoom-reset[_ngcontent-%COMP%]{padding:10px 16px;font-size:14px;min-height:44px}.share-controls[_ngcontent-%COMP%]{bottom:80px;right:16px;flex-direction:column;padding:10px;gap:8px}.share-controls[_ngcontent-%COMP%]   .download-button[_ngcontent-%COMP%], .share-controls[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]{padding:12px 20px;font-size:14px;min-height:44px;min-width:100px}.add-fab[_ngcontent-%COMP%], .share-fab[_ngcontent-%COMP%]{display:block}.share-controls[_ngcontent-%COMP%]{display:none}}@media(max-width:375px){.canvas-instructions[_ngcontent-%COMP%]{top:8px;left:8px;right:8px;padding:8px 12px}.canvas-instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px}.zoom-controls[_ngcontent-%COMP%]{padding:8px 12px}.share-controls[_ngcontent-%COMP%]{bottom:70px;right:12px}}.share-menu-container[_ngcontent-%COMP%]{position:fixed;bottom:0;z-index:999;display:flex;justify-content:left;align-items:center;pointer-events:auto}.share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]{display:flex;gap:16px;background:#303030;padding:16px 20px;align-items:center;justify-content:center}.share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;border:none;background:#ffffff1a;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;padding:0;flex-shrink:0}.share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px}.share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-button.whatsapp[_ngcontent-%COMP%]{background:#25d36633}.share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-button.whatsapp[_ngcontent-%COMP%]:hover:not(:disabled){background:#25d3664d}.share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]:disabled{background:#ffffff0d!important;color:#fff6;cursor:not-allowed;opacity:.5}.share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]:disabled:hover{background:#ffffff0d;transform:none}.share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]:disabled:active{transform:none}.share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]:disabled   svg[_ngcontent-%COMP%]{opacity:.6}@media(max-width:768px){.share-menu-container[_ngcontent-%COMP%]{bottom:0}.share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]{padding:12px 16px;gap:12px}.share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]{width:64px;height:64px}.share-menu-container[_ngcontent-%COMP%]   .share-menu[_ngcontent-%COMP%]   .share-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}}'],changeDetection:0})};var It=class h{title=x("sample-reflect");static \u0275fac=function(e){return new(e||h)};static \u0275cmp=R({type:h,selectors:[["app-root"]],decls:3,vars:1,consts:[[3,"fullScreen"]],template:function(e,n){e&1&&(d(0,"lib-layout",0),M(1,"app-canvas")(2,"router-outlet"),g()),e&2&&C("fullScreen",!0)},dependencies:[St,jt,lt],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}"]})};export{It as App};
